<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i 5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/test.css">
</head>
<body class="flex flex-col items-center justify-between min-h-screen bg-gray-100">
    <header >
        <h1 class="textheader">An Kh√πng</h1>
        <button id="exit-button" class="btnExit">Tho√°t</button>
        <a href="index.html" class="btnHome">
            <i class="fa-solid fa-arrow-left" style="color: rgb(0, 0, 0); font-size: 20px; font-weight: bold; margin-left: 8px;"></i>Trang Ch·ªß.
        </a>
    </header>
    <!-- Container ch√≠nh (Chia l√†m 2 c·ªôt tr√™n m√†n h√¨nh l·ªõn) -->
    <div class="container mx-auto px-4 my-8 grid grid-cols-1 md:grid-cols-10 gap-8 items-start">
        <!-- KHUNG B√äN TR√ÅI: N·ªòI DUNG C√ÇU H·ªéI (7/10 c·ªôt) -->
        <div id="quiz-container" class="bg-white p-8 rounded-2xl shadow-xl w-full md:col-span-7">
            <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu b√†i ki·ªÉm tra -->
            <div id="start-screen" class="text-center">
                <h1 class="text-3xl font-bold text-gray-900 mb-4">B√†i 5</h1>
                <p class="text-gray-600 mb-6">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi b√†i ki·ªÉm tra! H√£y nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
                <button id="start-button" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105">B·∫Øt ƒë·∫ßu</button>
            </div>
            <!-- N·ªôi dung Quiz: Hi·ªÉn th·ªã c√¢u h·ªèi v√† ƒë√°p √°n -->
            <div id="quiz-content" class="hidden">
                <!-- B·ªô ƒë·∫øm c√¢u h·ªèi (VD: 1/10) -->
                <p id="question-counter" class="text-lg font-semibold text-gray-700 mb-2"></p>
                <!-- Ti√™u ƒë·ªÅ/N·ªôi dung c√¢u h·ªèi -->
                <h2 id="question-text" class="text-xl text-gray-1500 mb-2"></h2><br>
                <!-- H√¨nh minh h·ªça c√¢u h·ªèi (n·∫øu c√≥) -->
                <div id="question-image-container" class="mb-4 hidden">
                    <img id="question-image" src="" alt="Minh h·ªça c√¢u h·ªèi" class="mx-auto rounded-xl shadow-lg max-h-64 object-contain">
                </div>
                <!-- Th√¥ng b√°o cho c√¢u h·ªèi Multi-Select -->
                <p id="multiselect-info" class="text-sm text-red-500 font-medium mb-4 hidden"><i>2 ƒë√°p √°n ƒë√∫ng!</i></p>
                <!-- 1. Container cho Single/Multi-Select (Ch·ªçn ƒë√°p √°n) -->
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <!-- C√°c n√∫t ƒë√°p √°n ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                </div>
                <!-- 2. Container cho Drag & Drop (K√©o th·∫£) -->
                <div id="dragdrop-container" class="hidden">
                    <p class="text-sm text-blue-500 font-medium mb-4">K√©o th·∫£ theo √Ω ƒë√∫ng</p>
                    <!-- V√πng k√©o (Source): Ch·ª©a c√°c th·∫ª ch∆∞a ƒë∆∞·ª£c th·∫£ -->
                    <div id="draggable-items-source" class="source-drop-zone drop-zone flex flex-wrap gap-3 p-4 bg-gray-50 border rounded-xl mb-6 shadow-inner">
                        <p class="text-gray-500 text-sm italic w-full source-placeholder">K√©o c√°c th·∫ª ·ªü ƒë√¢y... </p>
                    </div>
                    <!-- V√πng th·∫£ (Targets): Ch·ª©a c√°c Category -->
                    <div id="drop-targets-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
                </div>
                <!-- 3. Container cho Fill-in-the-Blank (ƒêi·ªÅn t·ª´) -->
                <div id="fill-in-the-blank-container" class="space-y-4 hidden mt-6">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input 
                            type="text" 
                            id="fill-in-the-blank-input" 
                            placeholder="Nh·∫≠p ƒë√°p √°n c·ªßa b·∫°n..." 
                            class="flex-grow p-3 border border-gray-300 rounded-lg transition duration-150"
                        >
                        <button 
                            id="check-fill-in-the-blank-button"
                            class="check-button-enabled text-black font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 disabled:bg-gray-400"
                            onclick="checkFillInTheBlank()"
                        >
                            Ki·ªÉm tra ƒë√°p √°n
                        </button>
                    </div>
                </div>
                <!-- Thanh ƒëi·ªÅu h∆∞·ªõng d∆∞·ªõi c√πng -->
                <div class="flex justify-end items-center mt-6 border-t pt-4 space-x-4">
                    <button 
                        id="check-answer-button" 
                        class="hidden text-black font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                    >
                        Ki·ªÉm tra
                    </button>
                    <button 
                        id="next-button" 
                        class="bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-full shadow-md transition-all duration-300 transform hover:scale-105"
                    >
                        Ti·∫øp
                    </button>
                </div>
            </div>
            <!-- M√†n h√¨nh k·∫øt qu·∫£ cu·ªëi b√†i thi -->
            <div id="results-screen" class="hidden text-center">
                <h2 class="text-3xl font-bold text-green-600 mb-4">Ho√†n th√†nh b√†i ki·ªÉm tra!</h2>
                <!-- HI·ªÇN TH·ªä ƒêI·ªÇM S·ªê ƒê√É T·ªêI ∆ØU H√ìA -->
                <div class="bg-blue-50 p-6 rounded-2xl shadow-xl inline-block mb-6">
                    <p class="text-xl font-semibold text-gray-700">ƒêi·ªÉm s·ªë c·ªßa b·∫°n:</p>
                    <!-- Th·∫ª hi·ªÉn th·ªã ƒëi·ªÉm s·ªë cu·ªëi c√πng -->
                    <p id="final-score" class="text-6xl font-extrabold text-blue-700 mt-2">0 / 0</p>
                </div>
                <p id="result-message" class="text-gray-700 mb-6">B·∫°n c√≥ th·ªÉ xem l·∫°i c√°c c√¢u tr·∫£ l·ªùi c·ªßa m√¨nh tr√™n giao di·ªán.</p>
                <button id="restart-button" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105">L√†m l·∫°i</button>
            </div>
        </div>
        <!-- KHUNG B√äN PH·∫¢I: SIDEBAR (3/10 c·ªôt) -->
        <div id="sidebar" class="bg-white p-6 rounded-2xl shadow-xl w-full hidden md:block md:col-span-3 sticky top-8">
            <div class="mb-6 text-center">
                <p class="text-xl font-semibold text-gray-700 mb-2">Th·ªùi gian l√†m b√†i:</p>
                <!-- ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c/ƒë·∫øm th·ªùi gian -->
                <div id="timer" class="text-4xl font-bold text-red-500">00:00</div>
            </div>
            <div>
                <p class="text-lg font-semibold text-gray-700 mb-4">Danh s√°ch c√¢u h·ªèi:</p>
                <!-- Danh s√°ch c√°c n√∫t c√¢u h·ªèi ƒë·ªÉ nh·∫£y qua l·∫°i -->
                <div id="question-list-container" class="grid grid-cols-4 gap-2">
                    <!-- C√°c n√∫t c√¢u h·ªèi ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer class="w-full bg-gray-800 text-white text-center py-4 px-6 mt-auto">
        <p class="text-sm">&copy; Website luy·ªán t·∫≠p!!!</p>
    </footer>
    <script>
        let questions = [
        //C√¢u 1
        {
            question: "Git l√† g√¨?",
            options: [
                "A. M·ªôt h·ªá ƒëi·ªÅu h√†nh",
                "B. M·ªôt c√¥ng c·ª• thi·∫øt k·∫ø UI / UX",
                "C. H·ªá th·ªëng qu·∫£n l√Ω phi√™n b·∫£n ph√¢n t√°n (VCS)",
                "D. H·ªá th·ªëng qu·∫£n l√Ω phi√™n b·∫£n t·∫≠p trung (VCS)"
            ],
            answer: "C. H·ªá th·ªëng qu·∫£n l√Ω phi√™n b·∫£n ph√¢n t√°n (VCS)",
            type: "single_select"
        },
        //C√¢u 2
        {
            question: "L·ªánh git init d√πng ƒë·ªÉ l√†m g√¨?",
            options: [
                "A. X√≥a repository",
                "B. T·∫°o m·ªôt repository Git m·ªõi c·ª•c b·ªô",
                "C. ƒê·ªìng b·ªô v·ªõi GitHub",
                "D. C√†i Git tr√™n h·ªá ƒëi·ªÅu h√†nh t∆∞∆°ng ·ª©ng"
            ],
            answer: "B. T·∫°o m·ªôt repository Git m·ªõi c·ª•c b·ªô",
            type: "single_select"
        },
        // C√¢u 3
        {
            question: "ƒê·ªÉ ƒë·∫©y m√£ l√™n GitHub, d√πng l·ªánh n√†o sau ƒë√¢y?",
            options: [
                "A. git push origin main",
                "B. git clone",
                "C. git upload github",
                "D. git connect gitHub"
            ],
            answer: "A. git push origin main",
            type: "single_select"
        },
        //C√¢u 4
        {
            question: "Git h·ªó tr·ª£ l·∫≠p tr√¨nh c·ªông t√°c b·∫±ng c√°ch n√†o?",
            options: [
                "A. Kh√≥a file kh√¥ng cho s·ª≠a",
                "B. G·ªôp nh√°nh v√† gi·∫£i quy·∫øt xung ƒë·ªôt",
                "C. T·ª± ƒë·ªông t·∫°o giao di·ªán",
                "D. Kh√¥ng h·ªó tr·ª£ c·ªông t√°c"
            ],
            answer: "B. G·ªôp nh√°nh v√† gi·∫£i quy·∫øt xung ƒë·ªôt",
            type: "single_select"
        },
        // C√¢u 5
        {
            question: "ƒê·ªÉ xem l·ªãch s·ª≠ commit, d√πng l·ªánh git n√†o?",
            options: [
                "A. git history",
                "B. git changes",
                "C. git log",
                "D. git track"
            ],
            answer: "C. git log",
            type: "single_select"
        },
        // C√¢u 6
        {
            question: "Pull request (PR) tr√™n GitHub l√† g√¨?",
            options: [
                "A. T·∫°o m·ªôt b·∫£n v√° l·ªói",
                "B. Y√™u c·∫ßu g·ªôp code t·ª´ nh√°nh n√†y sang nh√°nh kh√°c, th∆∞·ªùng d√πng ƒë·ªÉ review",
                "C. Th·ª±c thi h√†nh ƒë·ªông x√≥a m√£",
                "D. Ch·ª©c nƒÉng kh√≥a repository"
            ],
            answer: "B. Y√™u c·∫ßu g·ªôp code t·ª´ nh√°nh n√†y sang nh√°nh kh√°c, th∆∞·ªùng d√πng ƒë·ªÉ review",
            type: "single_select"
        },
        // C√¢u 7
        {
            question: "L·ªánh git branch feature1 d√πng ƒë·ªÉ l√†m g√¨?",
            options: [
                "A. X√≥a nh√°nh feature1",
                "B. T·∫°o nh√°nh m·ªõi c√≥ t√™n feature1",
                "C. ƒê·ªïi t√™n repository th√†nh feature1",
                "D. Di chuy·ªÉn t·ªáp c√≥ t√™n feature1"
            ],
            answer: "B. T·∫°o nh√°nh m·ªõi c√≥ t√™n feature1",
            type: "single_select"
        },
        // C√¢u 8.1
        {
            question: "Trong Git, nh√°nh (branch) gi√∫p c√°c l·∫≠p tr√¨nh vi√™n l√†m vi·ªác song song m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn nh√°nh ch√≠nh.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 8.2

        {
            question: "Nh√°nh main ho·∫∑c master th∆∞·ªùng l√† nh√°nh ch√≠nh (production) c·ªßa d·ª± √°n.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 8.3

        {
            question: "Pull Request l√† qu√° tr√¨nh t·∫°o nh√°nh m·ªõi trong GitHub.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "B. Sai", 
            type: "single_select"
        },
        // C√¢u 8.4

        {
            question: "Git Flow l√† m·ªôt chi·∫øn l∆∞·ª£c ph√¢n nh√°nh gi√∫p t·ªï ch·ª©c quy tr√¨nh ph√°t tri·ªÉn c√≥ ki·ªÉm so√°t.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 9.1

        {
            question: "M·ªói commit trong Git n√™n c√≥ th√¥ng ƒëi·ªáp r√µ r√†ng m√¥ t·∫£ m·ª•c ƒë√≠ch thay ƒë·ªïi.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 9.2

        {
            question: "Khi m·ªôt th√†nh vi√™n c·∫≠p nh·∫≠t code, nh·ªØng ng∆∞·ªùi kh√°c c·∫ßn d√πng git pull ƒë·ªÉ ƒë·ªìng b·ªô.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 9.3

        {
            question: "Branch feature/ th∆∞·ªùng d√πng ƒë·ªÉ ph√°t tri·ªÉn t√≠nh nƒÉng m·ªõi trong chi·∫øn l∆∞·ª£c Git Flow.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 9.4

        {
            question: "B·∫°n kh√¥ng th·ªÉ x√≥a nh√°nh sau khi ƒë√£ merge v√†o nh√°nh ch√≠nh.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "B. Sai", 
            type: "single_select"
        },
        // C√¢u 10.1

        {
            question: "M·ªôt commit sai c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠a b·∫±ng l·ªánh git commit --amend.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 10.2

        {
            question: "GitHub h·ªó tr·ª£ g√°n reviewer v√† comment trong pull request ƒë·ªÉ xem x√©t code.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 10.3

        {
            question: "M·ªôt l·ª£i √≠ch c·ªßa ph√¢n nh√°nh l√† gi√∫p t√°ch bi·ªát ph√°t tri·ªÉn v√† tri·ªÉn khai, gi·∫£m xung ƒë·ªôt.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },	
        // C√¢u 10.4

        {
            question: "Chi·∫øn l∆∞·ª£c GitHub Flow ch·ªâ ph√π h·ª£p cho d·ª± √°n nh·ªè, kh√¥ng d√πng ƒë∆∞·ª£c trong CI/CD.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "B. Sai", 
            type: "single_select"
        },
        // C√¢u 11
        {
            question: "M·ª•c ƒë√≠ch ch√≠nh c·ªßa qu·∫£n l√Ω m√£ ngu·ªìn l√† g√¨?",
            options: [
                "A. Duy·ªát l·ªói th·ªß c√¥ng; c·∫£nh b√°o ng∆∞·ªùi d√πng khi c√≥ l·ªói code",
                "B. Thi·∫øt k·∫ø giao di·ªán ph·∫ßn m·ªÅm",
                "C. B·∫£o v·ªá m√°y ch·ªß",
                "D. Theo d√µi, qu·∫£n l√Ω v√† ki·ªÉm so√°t c√°c phi√™n b·∫£n m√£ ngu·ªìn"
            ],
            answer: "D. Theo d√µi, qu·∫£n l√Ω v√† ki·ªÉm so√°t c√°c phi√™n b·∫£n m√£ ngu·ªìn",
            type: "single_select"
        },
        // c√¢u 12
        {
            question: "L·ªánh git clone d√πng ƒë·ªÉ l√†m g√¨?",
            options: [
                "A. X√≥a t·ªáp trong repository t·ª´ xa v√† kho c·ª•c b·ªô",
                "B. Sao ch√©p m·ªôt repository t·ª´ xa v·ªÅ m√°y c·ª•c b·ªô",
                "C. G·ª≠i m√£ l√™n GitHub",
                "D. T·∫°o repository m·ªõi"
            ],
            answer: "B. Sao ch√©p m·ªôt repository t·ª´ xa v·ªÅ m√°y c·ª•c b·ªô",
            type: "single_select"
        },
        // C√¢u 13
        {
            question: "L·ªánh git add c√≥ ch·ª©c nƒÉng g√¨?",
            options: [
                "A. ƒê·ªìng b·ªô Git v·ªõi GitHub",
                "B. ƒê∆∞a thay ƒë·ªïi v√†o khu v·ª±c staging",
                "C. Di chuy·ªÉn t·ªáp",
                "D. T·∫°o t·ªáp m·ªõi"
            ],
            answer: "B. ƒê∆∞a thay ƒë·ªïi v√†o khu v·ª±c staging",
            type: "single_select"
        },
        // C√¢u 14
        {
            question: "Khi g·∫∑p xung ƒë·ªôt merge, b∆∞·ªõc ƒë·∫ßu ti√™n n√™n l√†m g√¨?",
            options: [
                "A. Xem v√† s·ª≠a th·ªß c√¥ng file xung ƒë·ªôt",
                "B. G·ª° repository",
                "C. Ch·∫°y l·∫°i git init",
                "D. Ch·∫°y git commit"
            ],
            answer: "A. Xem v√† s·ª≠a th·ªß c√¥ng file xung ƒë·ªôt",
            type: "single_select"
        },
        // C√¢u 15.1
        {
            question: "Khi d√πng Git, ta c√≥ th·ªÉ kh√¥i ph·ª•c l·∫°i tr·∫°ng th√°i m√£ ngu·ªìn ·ªü b·∫•t k·ª≥ th·ªùi ƒëi·ªÉm n√†o n·∫øu c√≥ commit.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 15.2

        {
            question: "M·ªçi thay ƒë·ªïi trong Git ƒë·ªÅu ƒë∆∞·ª£c l∆∞u tr·ª±c ti·∫øp l√™n GitHub.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "B. Sai", 
            type: "single_select"
        },
        // C√¢u 15.3

        {
            question: "GitHub kh√¥ng h·ªó tr·ª£ l√†m vi·ªác nh√≥m v√¨ ch·ªâ n√≥ l√† m·ªôt tr√¨nh so·∫°n th·∫£o m√£ ngu·ªìn.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "B. Sai",     type: "single_select"
        },
        // C√¢u 15.4

        {
            question: "Git gi√∫p theo d√µi l·ªãch s·ª≠ thay ƒë·ªïi c·ªßa m√£ ngu·ªìn trong d·ª± √°n.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 16.1

        {
            question: "M·ªói th√†nh vi√™n n√™n l√†m vi·ªác tr√™n nh√°nh ri√™ng bi·ªát thay v√¨ s·ª≠a tr·ª±c ti·∫øp tr√™n main.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 16.2

        {
            question: "Git l√† m·ªôt t√≠nh nƒÉng m·ªü r·ªông c·ªßa GitHub.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "B. Sai",     type: "single_select"
        },
        // C√¢u 16.3

        {
            question: "Git ch·ªâ l∆∞u tr·ªØ ƒë∆∞·ª£c file vƒÉn b·∫£n, kh√¥ng th·ªÉ qu·∫£n l√Ω file h√¨nh ·∫£nh hay nh·ªã ph√¢n.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "B. Sai",     type: "single_select"
        },
        // C√¢u 16.4

        {
            question: "Git merge gi√∫p k·∫øt h·ª£p c√°c thay ƒë·ªïi t·ª´ nh√°nh n√†y v√†o nh√°nh kh√°c.",
            options: ["A. ƒê√∫ng", "B. Sai"],
            answer: "A. ƒê√∫ng",
            type: "single_select"
        },
        // C√¢u 17
        {
            question: "L·ªánh git commit -m ‚Äúmessage‚Äù th·ª±c hi·ªán ƒëi·ªÅu g√¨?",
            options: [
                "A. G·ª≠i file l√™n GitHub",
                "B. Kh√¥i ph·ª•c t·ªáp ƒë√£ x√≥a",
                "C. L∆∞u thay ƒë·ªïi k√®m ghi ch√∫ v√†o l·ªãch s·ª≠ Git",
                "D. Chuy·ªÉn ƒë·ªïi nh√°nh"
            ],
            answer: "C. L∆∞u thay ƒë·ªïi k√®m ghi ch√∫ v√†o l·ªãch s·ª≠ Git",
            type: "single_select"
        },
        // C√¢u 18
        {
            question: "T√™n m·∫∑c ƒë·ªãnh c·ªßa nh√°nh ch√≠nh khi t·∫°o repo Git l√† g√¨?",
            options: [
                "A. Feature",
                "B. main",
                "C. trunk",
                "D. production"
            ],
            answer: "B. main",
            type: "single_select"
        },
        // C√¢u 19
        {
            question: "ƒê·ªÉ chuy·ªÉn sang nh√°nh kh√°c trong Git, d√πng l·ªánh g√¨?",
            options: [
                "A. git move",
                "B. git deploy",
                "C. git start",
                "D. git checkout [branch-name]"
            ],
            answer: "D. git checkout [branch-name]",
            type: "single_select"
        },
        // C√¢u 20
        {
            question: "GitHub l√† g√¨?",
            options: [
                "A. M·ªôt tr√¨nh gi·∫£ l·∫≠p h·ªá ƒëi·ªÅu h√†nh",
                "B. M·ªôt ph·∫ßn m·ªÅm di·ªát virus ƒë·∫∑t tr√™n Hub",
                "C. M·ªôt d·ªãch v·ª• l∆∞u tr·ªØ Git repository tr√™n n·ªÅn t·∫£ng ƒë√°m m√¢y",
                "D. M·ªôt c√¥ng c·ª• ch·ªânh s·ª≠a ·∫£nh"
            ],
            answer: "C. M·ªôt d·ªãch v·ª• l∆∞u tr·ªØ Git repository tr√™n n·ªÅn t·∫£ng ƒë√°m m√¢y",
            type: "single_select"
        },
          // C√¢u 11
            {
                question: "Trong chi·∫øn l∆∞·ª£c Git Flow, nh√°nh ch√≠nh d√πng ƒë·ªÉ tri·ªÉn khai s·∫£n ph·∫©m ·ªïn ƒë·ªãnh l√† nh√°nh _____(1)_____. Nh√°nh ____(2)______ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ph√°t tri·ªÉn c√°c t√≠nh nƒÉng m·ªõi trong Git Flow.<br><br>Bi·∫øt c√°c th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn l√†: feature, main (ho·∫∑c master), hotfix",
                answer: "main (ho·∫∑c master), feature",
                type: "fill_in_the_blank"
            },
            // C√¢u 12
            {
                question: "Nh√°nh feature th∆∞·ªùng ƒë∆∞·ª£c t√°ch ra t·ª´ nh√°nh ____(1)______ v√† ƒë∆∞·ª£c g·ªôp l·∫°i nh√°nh develop sau khi ho√†n th√†nh. Nh√°nh develop th∆∞·ªùng ƒë∆∞·ª£c t√°ch ra t·ª´ nh√°nh ____(2)____.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: develop, main (ho·∫∑c master), release",
                answer: "develop, main (ho·∫∑c master)",
                type: "fill_in_the_blank"
            },
            // C√¢u 22
            {
                question: "Trong m·ªôt d·ª± √°n web <b>my-ecommerce-app</b>, nh√°nh <b>feature/cart-ui</b> c√≥ th·ªÉ ƒë∆∞·ª£c d√πng ƒë·ªÉ ph√°t tri·ªÉn ch·ª©c nƒÉng _(1)_. Quy t·∫Øc t·ªët trong l√†m vi·ªác nh√≥m l√† kh√¥ng push tr·ª±c ti·∫øp l√™n nh√°nh main m√† thay v√†o ƒë√≥ n√™n s·ª≠ d·ª•ng _(2)_ ƒë·ªÉ ki·ªÉm duy·ªát.<br><br>Bi·∫øt c√°c th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: giao di·ªán gi·ªè h√†ng, giao di·ªán ƒëƒÉng nh·∫≠p, pull request, get request",
                answer: "giao di·ªán gi·ªè h√†ng, pull request",
                type: "fill_in_the_blank"
            },
            // C√¢u 23
            {
                question: "Nh√°nh _(1)_ ƒë∆∞·ª£c d√πng ƒë·ªÉ chu·∫©n b·ªã ph√°t h√†nh b·∫£n ch√≠nh th·ª©c, th∆∞·ªùng ƒëi k√®m ki·ªÉm th·ª≠ t√≠ch h·ª£p v·ªõi QA. V·ªõi nh√°nh <b>hotfix-login-bug</b> d√πng ƒë·ªÉ _(2)_.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: s·ª≠a l·ªói kh·∫©n c·∫•p t·ªìn t·∫°i trong ch·ª©c nƒÉng login, release, tho√°t",
                answer: "release, s·ª≠a l·ªói kh·∫©n c·∫•p t·ªìn t·∫°i trong ch·ª©c nƒÉng login",
                type: "fill_in_the_blank"
            },
            // C√¢u 26
            {
                question: "Trong m√¥ h√¨nh GitHub Flow, m·ªçi thay ƒë·ªïi ƒë∆∞·ª£c b·∫Øt ƒë·∫ßu t·ª´ m·ªôt nh√°nh ph·ª•, v√† ph·∫£i t·∫°o m·ªôt _(1)_ ƒë·ªÉ ƒë∆∞a thay ƒë·ªïi v√†o nh√°nh ch√≠nh. Nh√°nh _(2)_ ƒë∆∞·ª£c t·∫°o ra khi c·∫ßn s·ª≠a l·ªói kh·∫©n c·∫•p trong phi√™n b·∫£n ƒëang ch·∫°y production.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: feature, pull request, hotfix",
                answer: "pull request, hotfix",
                type: "fill_in_the_blank"
            },
        {
            question: "K√©o ƒë√∫ng m·ª•c ƒë√≠ch s·ª≠ d·ª•ng v√†o nh√°nh Git t∆∞∆°ng ·ª©ng kho code d·ª± √°n qu·∫£n l√Ω nh√¢n s·ª±:",
            type: "drag_drop",
            categories: ["main", "develop", "feature/employee-search", "hotfix/login-error"],
            items: [
                { id: "item1", text: "Nh√°nh ch√≠nh c·ªßa kho code, ch·ª©a m√£ ngu·ªìn c·ªßa c√°c phi√™n b·∫£n s·∫£n ph·∫©m", correctCategory: "main" },
                { id: "item2", text: "Nh√°nh ch·ª©a code t·ªïng h·ª£p c·ªßa phi√™n b·∫£n ƒëang ph√°t tri·ªÉn", correctCategory: "develop" },
                { id: "item3", text: "Ch·ª©a code b·ªï sung t√≠nh nƒÉng t√¨m ki·∫øm nh√¢n s·ª±", correctCategory: "feature/employee-search" },
                { id: "item4", text: "Nh√°nh ch·ª©a code c·∫ßn s·ª≠a kh·∫©n c·∫•p c·ªßa ch·ª©c nƒÉng ƒëƒÉng nh·∫≠p", correctCategory: "hotfix/login-error" }
            ]
        },
        {
            question: "K√©o ƒë√∫ng t√°c d·ª•ng c·ªßa c√¥ng c·ª• h·ªó tr·ª£ cho CI pipeline:",
            type: "drag_drop",
            categories: ["GitHub", "GitHub Actions / Jenkins", "Docker / Maven / Gradle", "AWS / Heroku / Azure"],
            items: [
                { id: "item1", text: "L∆∞u tr·ªØ v√† qu·∫£n l√Ω m√£ ngu·ªìn", correctCategory: "GitHub" },
                { id: "item2", text: "C√¥ng c·ª• t·ª± ƒë·ªông h√≥a CI (build/test)", correctCategory: "GitHub Actions / Jenkins" },
                { id: "item3", text: "C√¥ng c·ª• build v√† ƒë√≥ng g√≥i ·ª©ng d·ª•ng", correctCategory: "Docker / Maven / Gradle" },
                { id: "item4", text: "M√¥i tr∆∞·ªùng tri·ªÉn khai (deployment) s·∫£n ph·∫©m", correctCategory: "AWS / Heroku / Azure" }
            ]
        },
        {
            question: "K√©o ƒë√∫ng h√†nh ƒë·ªông Git v√†o t·ª´ng b∆∞·ªõc trong quy tr√¨nh GitHub Flow:",
            type: "drag_drop",
            categories: ["T·∫°o nh√°nh m·ªõi", "Ghi l·∫°i thay ƒë·ªïi", "ƒê·∫©y nh√°nh l√™n GitHub"],
            items: [
                { id: "item1", text: "git checkout -b feature/...", correctCategory: "T·∫°o nh√°nh m·ªõi" },
                { id: "item2", text: "git add . && git commit -m", correctCategory: "Ghi l·∫°i thay ƒë·ªïi" },
                { id: "item3", text: "git push origin feature/...", correctCategory: "ƒê·∫©y nh√°nh l√™n GitHub" }
            ]
        },
        {
            question: "K√©o ƒë√∫ng h√†nh ƒë·ªông v√†o vai tr√≤ t∆∞∆°ng ·ª©ng tr√™n kho GitHub:",
            type: "drag_drop",
            categories: ["Project", "Review", "Developer"],
            items: [
                { id: "item1", text: "Qu·∫£n l√Ω issue, ph√¢n c√¥ng task", correctCategory: "Project" },
                { id: "item2", text: "Review Pull Request", correctCategory: "Review" },
                { id: "item3", text: "T·∫°o nh√°nh, update code, push code", correctCategory: "Developer" }
            ]
        },
        {
            question: "K√©o ƒë√∫ng t√°c d·ª•ng v√†o l·ªánh Git t∆∞∆°ng ·ª©ng:",
            type: "drag_drop",
            categories: ["git log", "git merge", "git pull", "git status"],
            items: [
                { id: "item1", text: "Xem l·ªãch s·ª≠ commit", correctCategory: "git log" },
                { id: "item2", text: "H·ª£p nh·∫•t nh√°nh", correctCategory: "git merge" },
                { id: "item3", text: "L·∫•y v√† h·ª£p nh·∫•t thay ƒë·ªïi t·ª´ github", correctCategory: "git pull" },
                { id: "item4", text: "Ki·ªÉm tra tr·∫°ng th√°i l√†m vi·ªác", correctCategory: "git status" }
            ]
        }
        ];
        let currentQuestionIndex = 0; // Ch·ªâ s·ªë c√¢u h·ªèi hi·ªán t·∫°i
        let elapsedTime = 0; // Th·ªùi gian l√†m b√†i (gi√¢y)
        let timerInterval; // Bi·∫øn l∆∞u tr·ªØ Interval c·ªßa ƒë·ªìng h·ªì
        let answeredQuestions = new Array(questions.length).fill(null);
        let correctnessStatus = new Array(questions.length).fill(null);
        // L·∫•y c√°c ph·∫ßn t·ª≠ DOM c·∫ßn thi·∫øt
        const startScreen = document.getElementById('start-screen');
        const startButton = document.getElementById('start-button');
        const quizContent = document.getElementById('quiz-content');
        const questionCounter = document.getElementById('question-counter');
        const multiselectInfo = document.getElementById('multiselect-info');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const dragdropContainer = document.getElementById('dragdrop-container');
        const draggableItemsSource = document.getElementById('draggable-items-source');
        const dropTargetsContainer = document.getElementById('drop-targets-container');
        const fillInTheBlankContainer = document.getElementById('fill-in-the-blank-container');
        const fillInTheBlankInput = document.getElementById('fill-in-the-blank-input');
        const checkFillInTheBlankButton = document.getElementById('check-fill-in-the-blank-button');
        const checkAnswerButton = document.getElementById('check-answer-button'); // N√∫t ki·ªÉm tra chung (Multi-select, Drag & Drop)
        const nextButton = document.getElementById('next-button');
        const resultsScreen = document.getElementById('results-screen');
        const restartButton = document.getElementById('restart-button');
        // S·ª¨A L·ªñI V√Ä T√çNH ƒêI·ªÇM: Th√™m c√°c d√≤ng n√†y ƒë·ªÉ khai b√°o bi·∫øn DOM
        const resultMessage = document.getElementById('result-message'); 
        const exitButton = document.getElementById('exit-button'); 
        const finalScore = document.getElementById('final-score'); // Th·∫ª hi·ªÉn th·ªã ƒëi·ªÉm s·ªë
        
        const sidebar = document.getElementById('sidebar');
        const timerDisplay = document.getElementById('timer');
        const questionListContainer = document.getElementById('question-list-container');
        function normalizeString(str) {
            let normalized = str.toLowerCase().trim();
            normalized = normalized.normalize('NFD').replace(/[\u0300-\u036f]/g, "");
            return normalized.replace(/\s+/g, '');
        }
        fillInTheBlankInput.onkeypress = (event) => {
            if (event.key === 'Enter') checkFillInTheBlank();
        };
        function drag(event) {
            event.dataTransfer.setData("text/plain", event.target.id);
            event.target.classList.add('opacity-50');
        }
        function dragEnd(event) {
            event.target.classList.remove('opacity-50');
        }
        function allowDrop(event) {
            event.preventDefault(); // Cho ph√©p th·∫£
            const target = event.target.closest('.drop-zone') || event.target.closest('.source-drop-zone');
            if (target) {
                target.classList.add('drag-over');
            }
        }
        function dragLeave(event) {
             const target = event.target.closest('.drop-zone') || event.target.closest('.source-drop-zone');
            if (target) {
                target.classList.remove('drag-over');
            }
        }
        function drop(event, categoryName) {
            event.preventDefault();
            let targetZone = event.target.closest('.drop-zone') || event.target.closest('.source-drop-zone');
            // N·∫øu ƒë√£ ki·ªÉm tra (c√≥ feedback), kh√¥ng cho ph√©p t∆∞∆°ng t√°c
            if (!targetZone || correctnessStatus[currentQuestionIndex] !== null) return; 
            targetZone.classList.remove('drag-over');
            const itemId = event.dataTransfer.getData("text/plain");
            const draggedElement = document.getElementById(itemId);
            if (draggedElement) {
                const oldParent = draggedElement.parentElement;
                if (oldParent) {
                    oldParent.removeChild(draggedElement);
                }
                targetZone.appendChild(draggedElement);
                let currentAnswer = answeredQuestions[currentQuestionIndex] || {};
                const itemText = draggedElement.textContent.trim(); 

                const isDroppedBackToSource = targetZone.id === 'draggable-items-source';

                if (isDroppedBackToSource) {
                    delete currentAnswer[itemText]; 
                } else { 
                    currentAnswer[itemText] = categoryName;
                }
                answeredQuestions[currentQuestionIndex] = Object.keys(currentAnswer).length > 0 ? currentAnswer : null;
                updateButtonStates();
            }
        }
        function checkCorrectness(questionIndex, selectedAnswers) {
            const currentQuestion = questions[questionIndex];
            if (currentQuestion.type === "drag_drop") {
                const droppedAnswers = selectedAnswers || answeredQuestions[questionIndex];
                if (!droppedAnswers) return false;
                if (Object.keys(droppedAnswers).length !== currentQuestion.items.length) {
                    return false;
                }
                return currentQuestion.items.every(item => {
                    const droppedCategory = droppedAnswers[item.text];
                    return droppedCategory === item.correctCategory;
                });
            } else if (currentQuestion.type === "fill_in_the_blank") {
                 const userAnswer = selectedAnswers || answeredQuestions[questionIndex];
                 if (!userAnswer) return false;
                 const normalizedUserAnswer = normalizeString(userAnswer);
                 const normalizedCorrectAnswer = normalizeString(currentQuestion.answer);

                 return normalizedUserAnswer === normalizedCorrectAnswer;
            } else {
                const correctAnswers = Array.isArray(currentQuestion.answer) ? currentQuestion.answer : [currentQuestion.answer];
                if (!Array.isArray(selectedAnswers)) {
                    selectedAnswers = selectedAnswers !== null ? [selectedAnswers] : [];
                }
                if (selectedAnswers.length !== correctAnswers.length) {
                    return false;
                }
                selectedAnswers.sort();
                correctAnswers.sort();
                return JSON.stringify(selectedAnswers) === JSON.stringify(correctAnswers);
            }
        }
        function showQuestion() {
            const currentQuestion = questions[currentQuestionIndex];
            questionCounter.textContent = `C√¢u h·ªèi: ${currentQuestionIndex + 1} / ${questions.length}`;
            questionText.innerHTML = currentQuestion.question;
            // ======= HI·ªÇN TH·ªä H√åNH ·∫¢NH MINH H·ªåA N·∫æU C√ì =======
            const imageContainer = document.getElementById("question-image-container");
            const imageElement = document.getElementById("question-image");
            if (currentQuestion.image) {
                imageElement.src = currentQuestion.image;
                imageContainer.classList.remove("hidden");
            } else {
                imageContainer.classList.add("hidden");
            }
            optionsContainer.classList.add('hidden');
            multiselectInfo.classList.add('hidden');
            dragdropContainer.classList.add('hidden');
            fillInTheBlankContainer.classList.add('hidden'); 
            checkAnswerButton.classList.add('hidden'); 
            if (currentQuestion.type === "drag_drop") {
                renderDragDropUI(currentQuestion);
                dragdropContainer.classList.remove('hidden');
            } else if (currentQuestion.type === "fill_in_the_blank") {
                renderFillInTheBlankUI(currentQuestion);
                fillInTheBlankContainer.classList.remove('hidden');
            } else {
                renderSelectUI(currentQuestion);
                optionsContainer.classList.remove('hidden');
            }
            nextButton.textContent = currentQuestionIndex >= questions.length - 1 ? "Ho√†n th√†nh b√†i thi" : "C√¢u ti·∫øp theo";
            updateButtonStates();
            updateSidebarHighlight();
        }
        function renderSelectUI(currentQuestion) {
            const isMulti = currentQuestion.type === "multi_select";
            multiselectInfo.classList.toggle('hidden', !isMulti);
            checkAnswerButton.classList.toggle('hidden', !isMulti); // Hi·ªÉn th·ªã n√∫t ki·ªÉm tra ch·ªâ cho Multi-Select
            optionsContainer.innerHTML = '';
            const savedAnswer = answeredQuestions[currentQuestionIndex];
            const savedAnswersArray = Array.isArray(savedAnswer) ? savedAnswer : (savedAnswer !== null ? [savedAnswer] : []);
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.innerHTML = option;
                let classes = [
                    "answer-button", "w-full", "py-3", "px-4", "rounded-xl", "text-center", 
                    "bg-gray-100", "border-2", "border-gray-300", 
                    "transition-all", "duration-200",
                    "font-medium", "text-gray-800", "shadow-sm"
                ];
                button.classList.add(...classes);
                if (isChecked) {
                    button.disabled = true;
                    button.classList.add("cursor-not-allowed");
                    const correctAnswers = Array.isArray(currentQuestion.answer) ? currentQuestion.answer : [currentQuestion.answer];
                    const isCorrectOption = correctAnswers.includes(option);
                    const isUserSelected = savedAnswersArray.includes(option);
                    if (isCorrectOption) {
                        button.classList.add("bg-green-500", "text-white", "border-green-600");
                        button.classList.remove("bg-gray-100", "border-gray-300");
                    }
                    if (isUserSelected && !isCorrectOption) {
                        button.classList.add("bg-red-500", "text-white", "border-red-600");
                        button.classList.remove("bg-green-500", "border-green-600", "bg-gray-100", "border-gray-300");
                    }
                } else {
                    button.classList.add("hover:bg-blue-100", "hover:border-blue-500");
                    if (isMulti) {
                        button.addEventListener('click', (e) => {
                            toggleSelection(e.currentTarget);
                            updateButtonStates(); 
                        });
                    } else {
                        button.addEventListener('click', (e) => singleSelectCheck(option, e.currentTarget));
                    }
                    if (savedAnswersArray.includes(option)) {
                        button.classList.add('selected-option');
                    }
                }
                optionsContainer.appendChild(button);
            });
        }
        function renderFillInTheBlankUI(currentQuestion) {
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            const savedAnswer = answeredQuestions[currentQuestionIndex] || "";
            fillInTheBlankInput.value = savedAnswer;
            fillInTheBlankInput.disabled = isChecked;
            fillInTheBlankInput.classList.remove('correct', 'incorrect');
            checkFillInTheBlankButton.classList.toggle('hidden', isChecked);
            if (isChecked) {
                const isCorrect = correctnessStatus[currentQuestionIndex];
                fillInTheBlankInput.classList.add(isCorrect ? 'correct' : 'incorrect');
                if (!isCorrect) {
                     fillInTheBlankInput.placeholder = `ƒê√°p √°n ƒë√∫ng: ${currentQuestion.answer}`;
                }
            } else {
                fillInTheBlankInput.placeholder = "Nh·∫≠p ƒë√°p √°n c·ªßa b·∫°n...";
            }
            updateButtonStates(); 
        }
        function checkFillInTheBlank() {
            const userAnswer = fillInTheBlankInput.value.trim();
            if (userAnswer === "") {
                showMessage("Vui l√≤ng nh·∫≠p ƒë√°p √°n v√†o √¥ tr·ªëng.", "yellow");
                return;
            }// 1. L∆∞u ƒë√°p √°n
            answeredQuestions[currentQuestionIndex] = userAnswer;
            checkAndApplyFeedback(currentQuestionIndex); 
            fillInTheBlankInput.disabled = true;
            checkFillInTheBlankButton.classList.add('hidden');
            updateButtonStates(); 
        }// --- Render Logic cho Drag & Drop ---
        function renderDragDropUI(currentQuestion) {
            draggableItemsSource.innerHTML = '';
            dropTargetsContainer.innerHTML = '';
            const savedDrops = answeredQuestions[currentQuestionIndex] || {};
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            const itemsDataMap = new Map(currentQuestion.items.map(item => [item.text, item]));
            checkAnswerButton.classList.remove('hidden');
            const sourcePlaceholder = document.createElement('p');
            sourcePlaceholder.classList.add('text-gray-500', 'text-sm', 'italic', 'w-full', 'source-placeholder');
            draggableItemsSource.ondragover = allowDrop;
            draggableItemsSource.ondragleave = dragLeave;
            if (!isChecked) {
                draggableItemsSource.ondrop = (e) => drop(e, null); 
                sourcePlaceholder.textContent = 'K√©o c√°c th·∫ª ·ªü ƒë√¢y... (K√©o th·∫ª t·ª´ √¥ ƒë√°p √°n v·ªÅ ƒë√¢y ƒë·ªÉ "k√©o ra")'; 
                sourcePlaceholder.classList.toggle('hidden', currentQuestion.items.length !== Object.keys(savedDrops).length);
            } else {
                draggableItemsSource.ondrop = null; // V√¥ hi·ªáu h√≥a k√©o/th·∫£
                sourcePlaceholder.textContent = 'ƒê√£ ho√†n th√†nh.';
                sourcePlaceholder.classList.add('hidden'); 
            }
            draggableItemsSource.appendChild(sourcePlaceholder);
            const dropZones = {};
            currentQuestion.categories.forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.classList.add('bg-gray-50', 'p-4', 'rounded-xl', 'shadow-md', 'flex', 'flex-col');
                const title = document.createElement('h3');
                title.textContent = category;
                title.classList.add('text-lg', 'font-bold', 'text-blue-700', 'mb-3', 'border-b', 'pb-2');
                categoryDiv.appendChild(title);
                const dropZone = document.createElement('div');
                dropZone.classList.add('drop-zone', 'flex', 'flex-wrap', 'gap-2', 'p-3', 'rounded-lg', 'flex-grow');
                dropZone.setAttribute('data-category', category);
                if (!isChecked) {
                    dropZone.ondragover = allowDrop;
                    dropZone.ondragleave = dragLeave;
                    dropZone.ondrop = (e) => drop(e, category); 
                } else {
                    dropZone.ondrop = null; 
                    dropZone.style.cursor = 'default';
                    const correctItemsForCategory = currentQuestion.items.filter(item => item.correctCategory === category);
                    const droppedItems = Object.entries(savedDrops)
                        .filter(([itemText, cat]) => cat === category)
                        .map(([itemText]) => itemText);
                    const correctlyPlacedCount = droppedItems.filter(text => itemsDataMap.get(text).correctCategory === category).length;
                    const incorrectlyPlacedCount = droppedItems.length - correctlyPlacedCount;
                    const missingCorrectCount = correctItemsForCategory.length - correctlyPlacedCount;
                    if (incorrectlyPlacedCount > 0 || missingCorrectCount > 0) {
                        dropZone.classList.add('incorrect-drop-zone');
                    } else if (correctlyPlacedCount > 0 && incorrectlyPlacedCount === 0 && missingCorrectCount === 0) {
                        dropZone.classList.add('correct-drop-zone');
                    }
                }
                dropTargetsContainer.appendChild(categoryDiv).appendChild(dropZone);
                dropZones[category] = dropZone;
            });
            currentQuestion.items.forEach(item => {
                const itemEl = createDraggableItem(item, isChecked);
                const droppedCategory = savedDrops[item.text];
                if (droppedCategory) {
                    const targetZone = dropZones[droppedCategory];
                    if (targetZone) {
                        targetZone.appendChild(itemEl);
                    }
                    if (isChecked) {
                        const isCorrect = droppedCategory === item.correctCategory;
                        itemEl.classList.remove('bg-white', 'border-gray-300');
                        itemEl.classList.add('text-gray-900', 'shadow-md', 'ring-2');
                        if (isCorrect) {
                            itemEl.classList.add('bg-green-200', 'ring-green-500');
                        } else {
                            itemEl.classList.add('bg-red-200', 'ring-red-500');
                            const correctHint = document.createElement('span');
                            correctHint.textContent = `(ƒê√∫ng: ${item.correctCategory})`;
                            correctHint.classList.add('text-xs', 'text-red-700', 'mt-1', 'block', 'font-normal');
                            itemEl.appendChild(correctHint);
                        }
                    }
                } else {// Item ch∆∞a ƒë∆∞·ª£c th·∫£ -> ƒê·∫∑t v√†o v√πng Source
                    draggableItemsSource.appendChild(itemEl);
                }
            });// ·∫®n placeholder Source n·∫øu kh√¥ng c√≤n item n√†o
            const placeholder = draggableItemsSource.querySelector('.source-placeholder');
            if (placeholder) placeholder.classList.toggle('hidden', currentQuestion.items.length === Object.keys(savedDrops).length);
        }// H√†m t·∫°o element cho th·∫ª k√©o
        function createDraggableItem(item, isChecked) {
            const itemEl = document.createElement('div');
            itemEl.id = item.id;
            itemEl.textContent = item.text;
            itemEl.classList.add(
                'draggable-item', 'p-3', 'rounded-lg', 'shadow-sm', 'font-medium', 'text-sm', 'text-gray-800'
            );
            if (!isChecked) {
                itemEl.setAttribute('draggable', 'true');
                itemEl.ondragstart = drag;
                itemEl.ondragend = dragEnd;
            } else {
                itemEl.setAttribute('draggable', 'false');
                itemEl.style.cursor = 'default';
            }
            return itemEl;
        }// --- Logic X·ª≠ l√Ω ƒê√°p √°n (Select) ---
        function toggleSelection(button) {
            button.classList.toggle('selected-option');
        }
        function singleSelectCheck(selectedOption, button) {
            answeredQuestions[currentQuestionIndex] = selectedOption;
            checkAndApplyFeedback(currentQuestionIndex);
            renderSelectUI(questions[currentQuestionIndex]);
            updateButtonStates();
        }// X·ª≠ l√Ω n√∫t CHECK ANSWER (cho Multi-Select v√† Drag & Drop)
        checkAnswerButton.addEventListener('click', () => {
            const currentQuestion = questions[currentQuestionIndex];
            if (currentQuestion.type === "multi_select") {
                const allOptionButtons = optionsContainer.querySelectorAll('button');
                const selectedOptions = Array.from(allOptionButtons)
                    .filter(btn => btn.classList.contains('selected-option'))
                    .map(btn => btn.textContent);
                if (selectedOptions.length === 0) {
                    showMessage("Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt ƒë√°p √°n tr∆∞·ªõc khi ki·ªÉm tra.", "yellow");
                    return;
                }// L∆∞u ƒë√°p √°n v√† ki·ªÉm tra
                answeredQuestions[currentQuestionIndex] = selectedOptions;
                checkAndApplyFeedback(currentQuestionIndex);
                renderSelectUI(questions[currentQuestionIndex]);
            } else if (currentQuestion.type === "drag_drop") {
                const droppedAnswers = answeredQuestions[currentQuestionIndex];
                const isAllDropped = droppedAnswers !== null && droppedAnswers && Object.keys(droppedAnswers).length === currentQuestion.items.length;
                if (!isAllDropped) {
                    showMessage("Vui l√≤ng k√©o th·∫£ t·∫•t c·∫£ c√°c th·∫ª v√†o v·ªã tr√≠ tr∆∞·ªõc khi ki·ªÉm tra.", "yellow");
                    return;
                }
                checkAndApplyFeedback(currentQuestionIndex);
                renderDragDropUI(questions[currentQuestionIndex]); // Render l·∫°i ƒë·ªÉ hi·ªÉn th·ªã feedback
            }
            updateButtonStates();
        });
        // H√†m ki·ªÉm tra v√† √°p d·ª•ng ph·∫£n h·ªìi
        function checkAndApplyFeedback(questionIndex) {
            const savedAnswer = answeredQuestions[questionIndex];
            const isCorrect = checkCorrectness(questionIndex, savedAnswer);
            const currentQuestionType = questions[questionIndex].type;
            if (isCorrect) {
                showMessage("üéâ Ch√∫c m·ª´ng, ƒë√°p √°n ch√≠nh x√°c!", "green");
            } else {
                if (currentQuestionType === "fill_in_the_blank") {
                     showMessage(`Sai r·ªìi. ƒê√°p √°n ƒë√∫ng l√†: ${questions[questionIndex].answer}.`, "red");
                } else if (currentQuestionType === "drag_drop") {
                     showMessage(`Sai r·ªìi. ƒê√°p √°n k√©o th·∫£ ch∆∞a ho√†n to√†n ch√≠nh x√°c. Vui l√≤ng xem ph·∫£n h·ªìi m√†u s·∫Øc!`, "red");
                } else {
                     showMessage("Sai r·ªìi. Vui l√≤ng xem l·∫°i k·∫øt qu·∫£ (M√†u xanh l√° l√† ƒë√∫ng, ƒë·ªè l√† sai)!", "red");
                }
            }
            correctnessStatus[questionIndex] = isCorrect;
            // X·ª≠ l√Ω feedback cho Fill-in-the-Blank (c·∫ßn g·ªçi l·∫°i renderFillInTheBlankUI ƒë·ªÉ update placeholder)
            if (currentQuestionType === "fill_in_the_blank") {
                renderFillInTheBlankUI(questions[questionIndex]);
            }
            updateSidebarHighlight(); // C·∫≠p nh·∫≠t m√†u s·∫Øc tr√™n sidebar
            return isCorrect;
        }
        function updateButtonStates() {
            const currentQuestion = questions[currentQuestionIndex];
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            nextButton.disabled = !isChecked;
            nextButton.classList.toggle('bg-gray-200', !isChecked);
            nextButton.classList.toggle('text-gray-800', !isChecked);
            nextButton.classList.toggle('enabled-next', isChecked);
            if (currentQuestion.type === "multi_select" || currentQuestion.type === "drag_drop") {
                checkAnswerButton.classList.toggle('hidden', isChecked);
                if (!isChecked) {
                    let isAnswered = false;
                    if (currentQuestion.type === "drag_drop") {
                        const droppedAnswers = answeredQuestions[currentQuestionIndex];
                        isAnswered = droppedAnswers !== null && droppedAnswers && Object.keys(droppedAnswers).length === currentQuestion.items.length;
                    } else if (currentQuestion.type === "multi_select") {
                        const currentSelections = optionsContainer.querySelectorAll('.selected-option').length;
                        isAnswered = currentSelections > 0;
                    }
                    checkAnswerButton.disabled = !isAnswered;
                    checkAnswerButton.classList.toggle('check-button-enabled', isAnswered);
                    checkAnswerButton.classList.toggle('check-button-disabled', !isAnswered);
                }
            }// 3. Logic cho n√∫t CHECK FILL-IN-THE-BLANK
            if (currentQuestion.type === "fill_in_the_blank") {
                if (!isChecked) {
                    const isAnswered = fillInTheBlankInput.value.trim() !== "";
                    checkFillInTheBlankButton.disabled = !isAnswered;
                    checkFillInTheBlankButton.classList.toggle('check-button-enabled', isAnswered);
                    checkFillInTheBlankButton.classList.toggle('check-button-disabled', !isAnswered);
                    fillInTheBlankInput.oninput = updateButtonStates; 
                }
            }
        }
        nextButton.addEventListener('click', nextQuestion);
        function nextQuestion() {
            if (correctnessStatus[currentQuestionIndex] === null) {
                const currentType = questions[currentQuestionIndex].type;
                if (currentType === "multi_select" || currentType === "drag_drop" || currentType === "fill_in_the-blank") {
                    showMessage("Vui l√≤ng nh·∫•n n√∫t 'Ki·ªÉm tra ƒë√°p √°n' tr∆∞·ªõc khi chuy·ªÉn c√¢u.", "yellow");
                    return;
                }
            }// Chuy·ªÉn sang c√¢u ti·∫øp theo (ho·∫∑c ho√†n th√†nh b√†i thi)
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }
        function jumpToQuestion(index) {
            currentQuestionIndex = index;
            showQuestion();
        }
        function goToStartScreen() {
            clearInterval(timerInterval);
            elapsedTime = 0; 
            timerDisplay.textContent = "00:00"; // ƒê·∫∑t l·∫°i ƒë·ªìng h·ªì hi·ªÉn th·ªã
            quizContent.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            sidebar.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }
        function showResults() {
            clearInterval(timerInterval);
            quizContent.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            const totalCorrect = correctnessStatus.filter(status => status === true).length;
            const totalQuestions = questions.length;
            // T·ªêI ∆ØU H√ìA T√çNH ƒêI·ªÇM: C·∫≠p nh·∫≠t th·∫ª hi·ªÉn th·ªã ƒëi·ªÉm s·ªë
            finalScore.textContent = `${totalCorrect} / ${totalQuestions}`;
            if (totalCorrect === totalQuestions) {
                resultMessage.textContent = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${totalCorrect} / ${totalQuestions} c√¢u. Xin ch√∫c m·ª´ng! B·∫°n ƒë·∫°t k·∫øt qu·∫£ tuy·ªát ƒë·ªëi.`;
            } else {
                resultMessage.textContent = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${totalCorrect} / ${totalQuestions} c√¢u. H√£y xem l·∫°i c√°c c√¢u tr·∫£ l·ªùi c·ªßa m√¨nh tr√™n giao di·ªán nh√©.`;
            }
            sidebar.classList.add('hidden');
        }
        function restartQuiz() {
            currentQuestionIndex = 0;
            answeredQuestions = new Array(questions.length).fill(null);
            correctnessStatus = new Array(questions.length).fill(null);
            resultsScreen.classList.add('hidden');
            quizContent.classList.remove('hidden');
            sidebar.classList.remove('hidden'); 
            startTimer();
            createQuestionList(); 
            showQuestion();
        }
        function startTimer() {
            clearInterval(timerInterval); 
            timerInterval = setInterval(() => {
                elapsedTime++;
                const minutes = Math.floor(elapsedTime / 60);
                const seconds = elapsedTime % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        function createQuestionList() {
            questionListContainer.innerHTML = '';
            questions.forEach((q, index) => {
                const button = document.createElement('button');
                button.textContent = index + 1;
                button.classList.add(
                    "w-8", "h-8", "rounded-full", "font-medium", "text-sm",
                    "bg-gray-200", "text-gray-800", "hover:bg-blue-200",
                    "transition-colors", "duration-200"
                );
                button.setAttribute('data-index', index);
                button.addEventListener('click', () => {
                    jumpToQuestion(index);
                });
                questionListContainer.appendChild(button);
            });
        }
        function updateSidebarHighlight() {
            const allQuestionButtons = questionListContainer.querySelectorAll('button');
            allQuestionButtons.forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'bg-green-500', 'bg-red-500', 'bg-yellow-400');
                const index = parseInt(btn.getAttribute('data-index'));
                if (index === currentQuestionIndex) {
                    btn.classList.add('bg-blue-600', 'text-white');
                } else if (correctnessStatus[index] === true) {
                    btn.classList.add('bg-green-500', 'text-white');
                } else if (correctnessStatus[index] === false) {
                    btn.classList.add('bg-red-500', 'text-white');
                } else if (answeredQuestions[index] !== null) {
                    btn.classList.add('bg-yellow-400', 'text-white');
                }
            });
        }
        function showMessage(text, color) {
            const existingMessage = quizContent.querySelector('.temp-message');
            if (existingMessage) existingMessage.remove();
            const colorClasses = {
                "yellow": "bg-yellow-100 border-yellow-400 text-yellow-700",
                "red": "bg-red-100 border-red-400 text-red-700",
                "green": "bg-green-100 border-green-400 text-green-700"
            };
            const messageBox = document.createElement('div');
            messageBox.textContent = text;
            const colorClassString = colorClasses[color] || colorClasses['yellow'];
            messageBox.classList.add(
                ...colorClassString.split(' '), 
                "border", "px-4", "py-3", "rounded", "relative", "mb-4", "temp-message"
            );
            quizContent.insertBefore(messageBox, questionCounter.nextElementSibling);
            setTimeout(() => messageBox.remove(), 3000); 
        }// --- H√†m X√ÅO TR·ªòN M·∫¢NG (Fisher-Yates Shuffle) ---
        function shuffleArray(array) {
            let shuffled = array.slice(); // T·∫°o b·∫£n sao ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn d·ªØ li·ªáu g·ªëc
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }// --- Kh·ªüi t·∫°o s·ª± ki·ªán ---
        startButton.addEventListener('click', () => {
            // ƒê·∫£m b·∫£o reset tr·∫°ng th√°i tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu
            currentQuestionIndex = 0;
            answeredQuestions = new Array(questions.length).fill(null);
            correctnessStatus = new Array(questions.length).fill(null);
            // questions = shuffleArray(questions); // X√°o tr·ªôn c√¢u h·ªèi
            startScreen.classList.add('hidden');
            quizContent.classList.remove('hidden');
            sidebar.classList.remove('hidden');
            createQuestionList();
            startTimer();
            showQuestion();
        });
        restartButton.addEventListener('click', restartQuiz);
        exitButton.addEventListener('click', () => {
            showMessage("ƒê√£ tho√°t kh·ªèi b√†i ki·ªÉm tra. D·ªØ li·ªáu l√†m b√†i hi·ªán t·∫°i s·∫Ω kh√¥ng ƒë∆∞·ª£c l∆∞u. ƒêang quay v·ªÅ m√†n h√¨nh b·∫Øt ƒë·∫ßu...", "red");
            setTimeout(goToStartScreen, 1000);
        });
    </script>
</body>
</html>