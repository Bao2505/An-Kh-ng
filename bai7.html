<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/test.css">
</head>
<body class="flex flex-col items-center justify-between min-h-screen bg-gray-100">
    <header >
        <h1 class="textheader">An Kh√πng</h1>
        <button id="exit-button" class="btnExit">Tho√°t</button>
        <a href="index.html" class="btnHome">
            <i class="fa-solid fa-arrow-left" style="color: rgb(0, 0, 0); font-size: 20px; font-weight: bold; margin-left: 8px;"></i>Trang Ch·ªß.
        </a>
    </header>
    <!-- Container ch√≠nh (Chia l√†m 2 c·ªôt tr√™n m√†n h√¨nh l·ªõn) -->
    <div class="container mx-auto px-4 my-8 grid grid-cols-1 md:grid-cols-10 gap-8 items-start">
        <!-- KHUNG B√äN TR√ÅI: N·ªòI DUNG C√ÇU H·ªéI (7/10 c·ªôt) -->
        <div id="quiz-container" class="bg-white p-8 rounded-2xl shadow-xl w-full md:col-span-7">
            <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu b√†i ki·ªÉm tra -->
            <div id="start-screen" class="text-center">
                <h1 class="text-3xl font-bold text-gray-900 mb-4">B√†i 7</h1>
                <p class="text-gray-600 mb-6">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi b√†i ki·ªÉm tra! H√£y nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
                <button id="start-button" class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105">B·∫Øt ƒë·∫ßu</button>
            </div>
            <!-- N·ªôi dung Quiz: Hi·ªÉn th·ªã c√¢u h·ªèi v√† ƒë√°p √°n -->
            <div id="quiz-content" class="hidden">
                <!-- B·ªô ƒë·∫øm c√¢u h·ªèi (VD: 1/10) -->
                <p id="question-counter" class="text-lg font-semibold text-gray-700 mb-2"></p>
                <!-- Ti√™u ƒë·ªÅ/N·ªôi dung c√¢u h·ªèi -->
                <h2 id="question-text" class="text-xl text-gray-1500 mb-2"></h2><br>
                <!-- H√¨nh minh h·ªça c√¢u h·ªèi (n·∫øu c√≥) -->
                <div id="question-image-container" class="mb-4 hidden">
                    <img id="question-image" src="" alt="Minh h·ªça c√¢u h·ªèi" class="mx-auto rounded-xl shadow-lg max-h-64 object-contain">
                </div>
                <!-- Th√¥ng b√°o cho c√¢u h·ªèi Multi-Select -->
                <p id="multiselect-info" class="text-sm text-red-500 font-medium mb-4 hidden"><i>2 ƒë√°p √°n ƒë√∫ng!</i></p>
                <!-- 1. Container cho Single/Multi-Select (Ch·ªçn ƒë√°p √°n) -->
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <!-- C√°c n√∫t ƒë√°p √°n ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                </div>
                <!-- 2. Container cho Drag & Drop (K√©o th·∫£) -->
                <div id="dragdrop-container" class="hidden">
                    <p class="text-sm text-blue-500 font-medium mb-4">K√©o th·∫£ theo √Ω ƒë√∫ng</p>
                    <!-- V√πng k√©o (Source): Ch·ª©a c√°c th·∫ª ch∆∞a ƒë∆∞·ª£c th·∫£ -->
                    <div id="draggable-items-source" class="source-drop-zone drop-zone flex flex-wrap gap-3 p-4 bg-gray-50 border rounded-xl mb-6 shadow-inner">
                        <p class="text-gray-500 text-sm italic w-full source-placeholder">K√©o c√°c th·∫ª ·ªü ƒë√¢y... </p>
                    </div>
                    <!-- V√πng th·∫£ (Targets): Ch·ª©a c√°c Category -->
                    <div id="drop-targets-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    </div>
                </div>
                <!-- 3. Container cho Fill-in-the-Blank (ƒêi·ªÅn t·ª´) -->
                <div id="fill-in-the-blank-container" class="space-y-4 hidden mt-6">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input 
                            type="text" 
                            id="fill-in-the-blank-input" 
                            placeholder="Nh·∫≠p ƒë√°p √°n c·ªßa b·∫°n..." 
                            class="flex-grow p-3 border border-gray-300 rounded-lg transition duration-150"
                        >
                        <button 
                            id="check-fill-in-the-blank-button"
                            class="check-button-enabled text-black font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 disabled:bg-gray-400"
                            onclick="checkFillInTheBlank()"
                        >
                            Ki·ªÉm tra ƒë√°p √°n
                        </button>
                    </div>
                </div>
                <!-- Thanh ƒëi·ªÅu h∆∞·ªõng d∆∞·ªõi c√πng -->
                <div class="flex justify-end items-center mt-6 border-t pt-4 space-x-4">
                    <button 
                        id="check-answer-button" 
                        class="hidden text-black font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                    >
                        Ki·ªÉm tra
                    </button>
                    <button 
                        id="next-button" 
                        class="bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-full shadow-md transition-all duration-300 transform hover:scale-105"
                    >
                        Ti·∫øp
                    </button>
                </div>
            </div>
            <!-- M√†n h√¨nh k·∫øt qu·∫£ cu·ªëi b√†i thi -->
            <div id="results-screen" class="hidden text-center">
                <h2 class="text-3xl font-bold text-green-600 mb-4">Ho√†n th√†nh b√†i ki·ªÉm tra!</h2>
                <!-- HI·ªÇN TH·ªä ƒêI·ªÇM S·ªê ƒê√É T·ªêI ∆ØU H√ìA -->
                <div class="bg-blue-50 p-6 rounded-2xl shadow-xl inline-block mb-6">
                    <p class="text-xl font-semibold text-gray-700">ƒêi·ªÉm s·ªë c·ªßa b·∫°n:</p>
                    <!-- Th·∫ª hi·ªÉn th·ªã ƒëi·ªÉm s·ªë cu·ªëi c√πng -->
                    <p id="final-score" class="text-6xl font-extrabold text-blue-700 mt-2">0 / 0</p>
                </div>
                <p id="result-message" class="text-gray-700 mb-6">B·∫°n c√≥ th·ªÉ xem l·∫°i c√°c c√¢u tr·∫£ l·ªùi c·ªßa m√¨nh tr√™n giao di·ªán.</p>
                <button id="restart-button" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105">L√†m l·∫°i</button>
            </div>
        </div>
        <!-- KHUNG B√äN PH·∫¢I: SIDEBAR (3/10 c·ªôt) -->
        <div id="sidebar" class="bg-white p-6 rounded-2xl shadow-xl w-full hidden md:block md:col-span-3 sticky top-8">
            <div class="mb-6 text-center">
                <p class="text-xl font-semibold text-gray-700 mb-2">Th·ªùi gian l√†m b√†i:</p>
                <!-- ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c/ƒë·∫øm th·ªùi gian -->
                <div id="timer" class="text-4xl font-bold text-red-500">00:00</div>
            </div>
            <div>
                <p class="text-lg font-semibold text-gray-700 mb-4">Danh s√°ch c√¢u h·ªèi:</p>
                <!-- Danh s√°ch c√°c n√∫t c√¢u h·ªèi ƒë·ªÉ nh·∫£y qua l·∫°i -->
                <div id="question-list-container" class="grid grid-cols-4 gap-2">
                    <!-- C√°c n√∫t c√¢u h·ªèi ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer class="w-full bg-gray-800 text-white text-center py-4 px-6 mt-auto">
        <p class="text-sm">&copy; Website luy·ªán t·∫≠p c·ªßa Th√πy Linh!!!</p>
    </footer>
    <script>
        let questions = [
            // C√¢u 1
            {
                question: "L·ª£i √≠ch c·ªßa vi·ªác t√≠ch h·ª£p li√™n t·ª•c l√† g√¨?",
                options: [
                    "A. Gi·∫£m chi ph√≠ ph·∫ßn c·ª©ng",
                    "B. Ph√°t hi·ªán l·ªói s·ªõm trong qu√° tr√¨nh ph√°t tri·ªÉn",
                    "C. Gi·∫£m chi ph√≠ b·∫£n quy·ªÅn ph·∫ßn m·ªÅm",
                    "D. TƒÉng s·ªë l∆∞·ª£ng developer"
                ],
                answer: "B. Ph√°t hi·ªán l·ªói s·ªõm trong qu√° tr√¨nh ph√°t tri·ªÉn",
                type: "single_select"
            },
            // C√¢u 2
            {
                question: "M·ªôt trong c√°c nguy√™n t·∫Øc c·ªßa CI l√† g√¨?",
                options: [
                    "A. Ch·ªâ t√≠ch h·ª£p khi phi√™n b·∫£n ch√≠nh th·ª©c ph√°t h√†nh",
                    "B. T√≠ch h·ª£p m·ªôt l·∫ßn m·ªói tu·∫ßn",
                    "C. M·ªói thay ƒë·ªïi m√£ ngu·ªìn n√™n ƒë∆∞·ª£c t√≠ch h·ª£p ngay",
                    "D. Kh√¥ng c·∫ßn vi·∫øt ki·ªÉm th·ª≠ t·ª± ƒë·ªông"
                ],
                answer: "C. M·ªói thay ƒë·ªïi m√£ ngu·ªìn n√™n ƒë∆∞·ª£c t√≠ch h·ª£p ngay",
                type: "single_select"
            },
            // C√¢u 3
            {
                question: "Khi s·ª≠ d·ª•ng Jenkins ƒë·ªÉ thi·∫øt l·∫≠p quy tr√¨nh CI v·ªõi GitHub, nh·ªØng b∆∞·ªõc n√†o sau ƒë√¢y th∆∞·ªùng c√≥ m·∫∑t trong pipeline? (ch·ªçn 3 ƒëap √°n ƒë√∫ng)",
                options: [
                    "A. Ki·ªÉm tra m√£ ngu·ªìn t·ª´ GitHub",
                    "B. Ph√¢n t√≠ch m√£ v·ªõi SonarQube",
                    "C. Ki·ªÉm th·ª≠ API th·ªß c√¥ng v·ªõi Postman",
                    "D. Build ·ª©ng d·ª•ng v·ªõi Maven"
                ],
                answer: ["A. Ki·ªÉm tra m√£ ngu·ªìn t·ª´ GitHub", "B. Ph√¢n t√≠ch m√£ v·ªõi SonarQube", "D. Build ·ª©ng d·ª•ng v·ªõi Maven"],
                type: "multi_select"
            },
            // C√¢u 4
            {
                question: "Khi t√≠ch h·ª£p Postman v√†o pipeline CI v·ªõi Jenkins, ƒëi·ªÅu g√¨ sau ƒë√¢y l√† kh·∫£ thi v√† h·ªØu √≠ch? (ch·ªçn 3 ƒëap √°n ƒë√∫ng)",
                options: [
                    "A. T·ª± ƒë·ªông ch·∫°y c√°c collection ki·ªÉm th·ª≠ API",
                    "B. Sinh b√°o c√°o ki·ªÉm th·ª≠ d·∫°ng HTML/XML",
                    "C. T·∫°o webhook ƒë·ªÉ g·ª≠i email cho t·ª´ng request",
                    "D. K·∫øt n·ªëi v·ªõi Jenkins ƒë·ªÉ ki·ªÉm th·ª≠ API sau khi build"
                ],
                answer: ["A. T·ª± ƒë·ªông ch·∫°y c√°c collection ki·ªÉm th·ª≠ API", "B. Sinh b√°o c√°o ki·ªÉm th·ª≠ d·∫°ng HTML/XML", "D. K·∫øt n·ªëi v·ªõi Jenkins ƒë·ªÉ ki·ªÉm th·ª≠ API sau khi build"],
                type: "multi_select"
            },
            // C√¢u 5
            {
                question: "C·∫•u tr√∫c m·ªôt CI pipeline s·ª≠ d·ª•ng Jenkins, GitHub, Postman, SonarQube th∆∞·ªùng bao g·ªìm tr√¨nh t·ª± c√°c b∆∞·ªõc n√†o sau ƒë√¢y?",
                options: [
                    "A. L·∫•y m√£ t·ª´ GitHub ‚Üí Build ‚Üí Ph√¢n t√≠ch m√£ ‚Üí Ki·ªÉm th·ª≠ API ‚Üí ƒê√≥ng g√≥i ‚Üí ƒê·∫©y artifact l√™n tr√¨nh qu·∫£n l√Ω g√≥i",
                    "B. Ki·ªÉm th·ª≠ API ‚Üí Commit code ‚Üí Merge ‚Üí Build",
                    "C. Build ‚Üí Push code ‚Üí Ph√¢n t√≠ch SonarQube ‚Üí Ki·ªÉm th·ª≠ Postman",
                    "D. Checkout code ‚Üí Build ‚Üí Static analysis ‚Üí Test ‚Üí Publish artifact"
                ],
                answer: ["A. L·∫•y m√£ t·ª´ GitHub ‚Üí Build ‚Üí Ph√¢n t√≠ch m√£ ‚Üí Ki·ªÉm th·ª≠ API ‚Üí ƒê√≥ng g√≥i ‚Üí ƒê·∫©y artifact l√™n tr√¨nh qu·∫£n l√Ω g√≥i", "D. Checkout code ‚Üí Build ‚Üí Static analysis ‚Üí Test ‚Üí Publish artifact"],
                type: "multi_select"
            },
            //C√¢u 6
            {
            question: "Trong quy tr√¨nh CI, b∆∞·ªõc n√†o th∆∞·ªùng ƒë∆∞·ª£c th·ª±c hi·ªán sau b∆∞·ªõc push m√£ ngu·ªìn?",
            options: [
                "A. ƒê√≥ng g√≥i ·ª©ng d·ª•ng",
                "B. Build m√£ ngu·ªìn",
                "C. Tri·ªÉn khai",
                "D. Ki·ªÉm th·ª≠ h·ªìi quy"
            ],
            answer: "A. ƒê√≥ng g√≥i ·ª©ng d·ª•ng",
            type: "single_select"
            },
            // C√¢u 7
            {
            question: "C√¥ng c·ª• n√†o sau ƒë√¢y ƒë∆∞·ª£c s·ª≠ d·ª•ng ph·ªï bi·∫øn cho CI?",
            options: [
                "A. Java editor",
                "B. C editor",
                "C. Jenkins",
                "D. Javac"
            ],
            answer: "C. Jenkins",
            type: "single_select"
            },
            // C√¢u 8
            {
            question: "SonarQube mang l·∫°i l·ª£i √≠ch g√¨ khi t√≠ch h·ª£p trong quy tr√¨nh CI c·ªßa Jenkins? (ch·ªçn 2 ƒë√°p √°n)",
            options: [
                "A. Ph√¢n t√≠ch l·ªói runtime trong production",
                "B. Ph√¢n t√≠ch m√£ tƒ©nh (static code analysis)",
                "C. X√°c ƒë·ªãnh ƒë·ªô bao ph·ªß ki·ªÉm th·ª≠ (test coverage)",
                "D. Thay th·∫ø ho√†n to√†n ki·ªÉm th·ª≠ ƒë∆°n v·ªã"
            ],
            Answers: ["B. Ph√¢n t√≠ch m√£ tƒ©nh (static code analysis)",
                "C. X√°c ƒë·ªãnh ƒë·ªô bao ph·ªß ki·ªÉm th·ª≠ (test coverage)"],

            type: "multi_select"
            },
            // C√¢u 9
            {
            question: "Vai tr√≤ c·ªßa tr√¨nh qu·∫£n l√Ω g√≥i nh∆∞ Nexus ho·∫∑c Artifactory trong pipeline CI l√† g√¨? (ch·ªçn 2 ƒë√°p √°n ƒë√∫ng)",
            options: [
                "A. L∆∞u tr·ªØ c√°c build artifact ƒë·ªÉ t√°i s·ª≠ d·ª•ng",
                "B. Ki·ªÉm tra m√£ ngu·ªìn tr∆∞·ªõc khi build",
                "C. L√† n∆°i l∆∞u tr·ªØ th∆∞ vi·ªán ph·ª• thu·ªôc (dependencies)",
                "D. Cung c·∫•p plugin CI ri√™ng cho Jenkins"
            ],
            answers: ["A. L∆∞u tr·ªØ c√°c build artifact ƒë·ªÉ t√°i s·ª≠ d·ª•ng",  "C. L√† n∆°i l∆∞u tr·ªØ th∆∞ vi·ªán ph·ª• thu·ªôc (dependencies)"],
            type: "multi_select"
            }, 
            // C√¢u 10
            {
            question: "M·ª•c ti√™u c·ªßa t√≠ch h·ª£p li√™n t·ª•c (CI) l√† g√¨?",
            options: [
                "A. Tri·ªÉn khai ·ª©ng d·ª•ng t·ª± ƒë·ªông l√™n m√¥i tr∆∞·ªùng production",
                "B. T·ªëi ∆∞u h√≥a hi·ªáu su·∫•t h·ªá th·ªëng",
                "C. Qu·∫£n l√Ω h·∫° t·∫ßng d∆∞·ªõi d·∫°ng m√£",
                "D. T·ª± ƒë·ªông ki·ªÉm tra v√† t√≠ch h·ª£p m√£ ngu·ªìn th∆∞·ªùng xuy√™n"
            ],
            answer: "D. T·ª± ƒë·ªông ki·ªÉm tra v√† t√≠ch h·ª£p m√£ ngu·ªìn th∆∞·ªùng xuy√™n",
            type: "single_select"
            },
            // C√ÇU 3
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>SonarQube ƒë∆∞·ª£c t√≠ch h·ª£p v√†o pipeline CI ƒë·ªÉ th·ª±c hi·ªán ph√¢n t√≠ch m√£ ngu·ªìn tƒ©nh sau khi code ƒë∆∞·ª£c ____(1)_____ v√†o kho Git. Trong quy tr√¨nh CI/CD, Jenkins ho·∫∑c GitHub Actions s·∫Ω t·ª± ƒë·ªông ch·∫°y c√°c b√†i ki·ªÉm th·ª≠ v·ªõi ____(2)_____ ƒë·ªÉ ƒë·∫£m b·∫£o API ho·∫°t ƒë·ªông ƒë√∫ng sau m·ªói thay ƒë·ªïi.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: postman, commit (ho·∫∑c push), clone",
                answer: "commit (ho·∫∑c push), postman",
                type: "fill_in_the_blank"
            },

            // C√ÇU 4
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>C√°c file c·∫•u h√¨nh test trong Postman th∆∞·ªùng ƒë∆∞·ª£c t·ªï ch·ª©c th√†nh _____(1)____ ƒë·ªÉ ch·∫°y h√†ng lo·∫°t theo flow nghi·ªáp v·ª•. Sau khi ki·ªÉm th·ª≠ API v·ªõi Postman, k·∫øt qu·∫£ c√≥ th·ªÉ ƒë∆∞·ª£c ghi log v√† theo d√µi t·ª± ƒë·ªông th√¥ng qua c√¥ng c·ª• CI nh∆∞ ____(2)_____.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: collection , gitHub actions (ho·∫∑c jenkins), request",
                answer: "collection, gitHub actions (ho·∫∑c jenkins)",
                type: "fill_in_the_blank"
            },

            // C√ÇU 5
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>Trong quy tr√¨nh CI, l·∫≠p tr√¨nh vi√™n th∆∞·ªùng s·ª≠ d·ª•ng c√¥ng c·ª• __(1)__ ƒë·ªÉ qu·∫£n l√Ω phi√™n b·∫£n m√£ ngu·ªìn c·ª•c b·ªô v√† __(2)__ ƒë·ªÉ l∆∞u tr·ªØ m√£ ngu·ªìn tr√™n n·ªÅn t·∫£ng cloud.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: git , github , c#",
                answer: "git, github",
                type: "fill_in_the_blank"
            },

            // C√ÇU 6
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>Khi m·ªôt nh√°nh t√≠nh nƒÉng ƒë∆∞·ª£c ph√°t tri·ªÉn xong, nh√≥m ph√°t tri·ªÉn s·∫Ω t·∫°o __(1)__ ƒë·ªÉ ƒë·ªÅ xu·∫•t h·ª£p nh·∫•t, v√† quy tr√¨nh CI s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t ƒë·ªÉ ____ m√£ ngu·ªìn t·ª± ƒë·ªông.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: full request , ki·ªÉm th·ª≠ , m√£ h√≥a",
                answer: "full request , ki·ªÉm th·ª≠",
                type: "fill_in_the_blank"
            },

            // C√ÇU 7
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>__(1)__ l√† m·ªôt c√¥ng c·ª• CI ph·ªï bi·∫øn, n∆°i ta ƒë·ªãnh nghƒ©a c√°c __(2)__ ƒë·ªÉ t·ª± ƒë·ªông __(3)__, ki·ªÉm th·ª≠ v√† tri·ªÉn khai m√£ ngu·ªìn.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: pipeline , jenkins , build",
                answer: "jenkins,  pipeline, build",
                type: "fill_in_the_blank"
            },

            // C√ÇU 14
            {
                question: "Cho tr∆∞·ªõc Pipeline (Jenkinsfile) v·ªõi n·ªôi dung nh∆∞ m√†n h√¨nh ch·ª•p. H√£y k√©o th·∫£ th√¥ng tin ph√π h·ª£p v√†o c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu d∆∞·ªõi ƒë√¢y:<br>D√≤ng agent any khai b√°o r·∫±ng pipeline s·∫Ω ch·∫°y tr√™n b·∫•t k·ª≥ __(1)__ n√†o c√≥ s·∫µn. Kh·ªëi (Block) tools ƒë∆∞·ª£c d√πng ƒë·ªÉ khai b√°o s·ª≠ d·ª•ng c√¥ng c·ª• nh∆∞ __(2)__, trong ƒë√≥ 'M3' l√† t√™n c√¥ng c·ª•.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: node, Maven, .",
                answer: "node, Maven",
                type: "fill_in_the_blank"
            },

            // C√ÇU 15
            {
                question: "Cho tr∆∞·ªõc Pipeline (Jenkinsfile) v·ªõi n·ªôi dung nh∆∞ m√†n h√¨nh ch·ª•p. K√©o th·∫£ th√¥ng tin ph√π h·ª£p v√†o c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>C√¢u l·ªánh sh 'mvn clean install' ƒë∆∞·ª£c s·ª≠ d·ª•ng trong stage __(1)__ ƒë·ªÉ bi√™n d·ªãch v√† ƒë√≥ng g√≥i d·ª± √°n. Trong stage SonarQube Analysis, block withSonarQubeEnv(...) gi√∫p thi·∫øt l·∫≠p bi·∫øn m√¥i tr∆∞·ªùng nh∆∞ __(2)__ ƒë·ªÉ th·ª±c hi·ªán ph√¢n t√≠ch m√£.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: MAVEN_HOME, SONAR_HOST_URL, Build",
                answer: "Build, SONAR_HOST_URL",
                type: "fill_in_the_blank"
            },

            // C√ÇU 17
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>CI pipeline th∆∞·ªùng ƒë∆∞·ª£c __(1)__ khi l·∫≠p tr√¨nh vi√™n th·ª±c hi·ªán __(2)__ v√†o nh√°nh ch√≠nh v√† h·ªá th·ªëng s·ª≠ d·ª•ng __(3)__ ƒë·ªÉ th√¥ng b√°o h·ªá th·ªëng CI.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: commit , trigger , webhook,run",
                answer: "trigger, commit, webhook",
                type: "fill_in_the_blank"
            },

            // C√ÇU 18
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>L·∫≠p tr√¨nh vi√™n th∆∞·ªùng s·ª≠ d·ª•ng __(1)__ ƒë·ªÉ theo d√µi phi√™n b·∫£n m√£ ngu·ªìn c·ª•c b·ªô, sau ƒë√≥ __(2)__ thay ƒë·ªïi l√™n __(3)__ ƒë·ªÉ k√≠ch ho·∫°t pipeline CI.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: git, push, kho github",
                answer: "git, push, kho github",
                type: "fill_in_the_blank"
            },

            // C√ÇU 20
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>__(1)__ l√† vi·∫øt t·∫Øt c·ªßa t√≠ch h·ª£p li√™n t·ª•c, c√≤n __(2)__ l√† tri·ªÉn khai li√™n t·ª•c, v√† c·∫£ hai ƒë·ªÅu l√† nguy√™n l√Ω c·ªët l√µi c·ªßa __(3)__.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: cd, ci , devops, jenkinsfile",
                answer: "ci, cd, devops",
                type: "fill_in_the_blank"
            },

            // C√ÇU 26
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>Bi·∫øn SONAR_TOKEN ƒë∆∞·ª£c khai b√°o trong kh·ªëi (block) __(1)__, gi√° tr·ªã l·∫•y t·ª´ Jenkins Credentials c√≥ ID l√† sonar-token. Checkout scm d√πng ƒë·ªÉ l·∫•y m√£ ngu·ªìn t·ª´ h·ªá th·ªëng __(2)__ ƒë√£ ƒë∆∞·ª£c li√™n k·∫øt v·ªõi Jenkins Job.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: environment, SCM",
                answer: "environment, SCM",
                type: "fill_in_the_blank"
            },

            // C√ÇU 28
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>Tr∆∞·ªõc khi merge v√†o nh√°nh ch√≠nh, quy tr√¨nh CI khuy·∫øn ngh·ªã ph·∫£i ph√¢n t√≠ch m√£ ngu·ªìn v·ªõi __(1)__ ƒë·ªÉ ph√°t hi·ªán bug, code smell, security issue. ƒê·ªÉ qu·∫£n l√Ω nh√°nh hi·ªáu qu·∫£, nh√≥m DevOps th∆∞·ªùng s·ª≠ d·ª•ng chi·∫øn l∆∞·ª£c ph√¢n nh√°nh nh∆∞ __(2)__ k·∫øt h·ª£p v·ªõi Git/GitHub.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: sonarqube , git flow",
                answer: "sonarqube, git flow",
                type: "fill_in_the_blank"
            },

            // C√ÇU 29
            {
                question: "ƒêi·ªÅn th√¥ng tin th√≠ch h·ª£p v√†o ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau:<br>Trong Jenkins, m·ªói pipeline c√≥ th·ªÉ ƒë∆∞·ª£c t·ªï ch·ª©c th√†nh m·ªôt __(1)__, n∆°i c√°c b∆∞·ªõc nh∆∞ build v√† __(2)__ ƒë∆∞·ª£c th·ª±c hi·ªán m·ªôt c√°ch t·ª± ƒë·ªông.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm:",
                answer: "job, test",
                type: "fill_in_the_blank"
            },

            // C√ÇU 30
            {
                question: "C√¢u l·ªánh sh 'mvn sonar:sonar' s·∫Ω th·ª±c hi·ªán ph√¢n t√≠ch m√£ tƒ©nh v√† g·ª≠i k·∫øt qu·∫£ l√™n __(1)__. Trong stage Postman Tests, c√¢u l·ªánh s·ª≠ d·ª•ng __(2)__ CLI ƒë·ªÉ ch·∫°y c√°c file ki·ªÉm th·ª≠ API ƒë·ªãnh nghƒ©a trong Postman. L·ªánh archiveArtifacts artifacts: '**/target/*.jar' d√πng ƒë·ªÉ l∆∞u c√°c __(3)__ build ƒë∆∞·ª£c t·ª´ qu√° tr√¨nh bi√™n d·ªãch.<br><br>Bi·∫øt th√¥ng tin c√≥ th·ªÉ ƒëi·ªÅn bao g·ªìm: SonarQube, newman, artifact",
                answer: "SonarQube, newman, artifact",
                type: "fill_in_the_blank"
            },
            // C√ÇU H·ªéI K√âO TH·∫¢ (DRAG & DROP)
            {
                question: "K√©o th·∫£ th√¥ng tin ph√π h·ª£p v√† c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau: Trong Jenkins CI __(1)__, ta c·∫ßn khai b√°o __(2)__ ch·ªâ ƒë·ªãnh m√¥i tr∆∞·ªùng th·ª±c thi l√† __(3)__.",
                type: "drag_drop",
                categories: ["(1)", "(2)", "(3)"],
                items: [
                    { id: "item1", text: "pipeline", correctCategory: "(1)" },
                    { id: "item2", text: "agent", correctCategory: "(2)" },
                    { id: "item3", text: "any", correctCategory: "(3)" },
                ]
            },

            // C√ÇU H·ªéI K√âO TH·∫¢ (DRAG & DROP)
            {
                question: "K√©o th·∫£ th√¥ng tin ph√π h·ª£p v√† c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau: ƒê·ªÉ t√≠ch h·ª£p GitHub v·ªõi Jenkins, c·∫ßn c√†i __(1)__ t√™n l√† __(2)__ trong m·ª•c __(3)__.",
                type: "drag_drop",
                categories: ["(1)", "(2)", "(3)"],
                items: [
                    { id: "item1", text: "plugin", correctCategory: "(1)" },
                    { id: "item2", text: "GitHub", correctCategory: "(2)" },
                    { id: "item3", text: "Manage Jenkins", correctCategory: "(3)" },
                ]
            },

            // C√ÇU H·ªéI K√âO TH·∫¢ (DRAG & DROP)
            {
                question: "K√©o th·∫£ th√¥ng tin ph√π h·ª£p v√† c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau: Jenkins h·ªó tr·ª£ hai ki·ªÉu ƒë·ªãnh nghƒ©a pipeline l√† __(1)__ pipeline (v·ªõi c√∫ ph√°p ƒë∆°n gi·∫£n, c√≥ c·∫•u tr√∫c c·ªë ƒë·ªãnh) v√† __(2)__ pipeline (s·ª≠ d·ª•ng __(3)__, l√† ng√¥n ng·ªØ l·∫≠p tr√¨nh chuy√™n bi·ªát vi·∫øt b·∫±ng Groovy ƒë·ªÉ m√¥ t·∫£ quy tr√¨nh CI/CD).",
                type: "drag_drop",
                categories: ["(1)", "(2)", "(3)"],
                items: [
                    { id: "item1", text: "Declarative", correctCategory: "(1)" },
                    { id: "item2", text: "Scripted", correctCategory: "(2)" },
                    { id: "item3", text: "DSL (Domain-Specific Language)", correctCategory: "(3)" },
                ]
            },
            // C√ÇU H·ªéI K√âO TH·∫¢ (DRAG & DROP)
        {
            question: "K√©o th·∫£ th√¥ng tin ph√π h·ª£p v√† c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau: M·ªói block __(1)__ trong Jenkinsfile bao g·ªìm c√°c __(2)__, trong ƒë√≥ l·ªánh __(3)__ th∆∞·ªùng d√πng ƒë·ªÉ in th√¥ng tin log.",
            type: "drag_drop",
            categories: ["(1)", "(2)", "(3)"],
            items: [
                { id: "item1", text: "stage", correctCategory: "(1)" },
                { id: "item2", text: "steps", correctCategory: "(2)" },
                { id: "item3", text: "echo", correctCategory: "(3)" },
            ]
        },

        // C√ÇU H·ªéI K√âO TH·∫¢ (DRAG & DROP)
        {
            question: "K√©o th·∫£ th√¥ng tin ph√π h·ª£p v√† c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau: ƒê·ªÉ l·∫•y m√£ t·ª´ GitHub trong Jenkinsfile, ta d√πng l·ªánh: __(1)__([$class: 'GitSCM', userRemoteConfigs: [[__(2)__: 'https://github.com/user/repo.git']]]).",
            type: "drag_drop",
            categories: ["(1)", "(2)"],
            items: [
                { id: "item1", text: "checkout", correctCategory: "(1)" },
                { id: "item2", text: "url", correctCategory: "(2)" },
            ]
        },

        // C√ÇU H·ªéI K√âO TH·∫¢ (DRAG & DROP)
        {
            question: "K√©o th·∫£ th√¥ng tin ph√π h·ª£p v√† c√°c ch·ªó tr·ªëng trong ph√°t bi·ªÉu sau: ƒê·ªÉ build d·ª± √°n Java v·ªõi __(1)__, trong Jenkinsfile c·∫ßn d√πng __(2)__ 'M3' (l√† t√™n Maven ƒë∆∞·ª£c c·∫•u h√¨nh trong Global Tool Configuration) v√† g·ªçi l·ªánh __(3)__ clean install.",
            type: "drag_drop",
            categories: ["(1)", "(2)", "(3)"],
            items: [
                { id: "item1", text: "Maven", correctCategory: "(1)" },
                { id: "item2", text: "tool", correctCategory: "(2)" },
                { id: "item3", text: "mvn", correctCategory: "(3)" },
            ]
        },

        ];
        let currentQuestionIndex = 0; // Ch·ªâ s·ªë c√¢u h·ªèi hi·ªán t·∫°i
        let elapsedTime = 0; // Th·ªùi gian l√†m b√†i (gi√¢y)
        let timerInterval; // Bi·∫øn l∆∞u tr·ªØ Interval c·ªßa ƒë·ªìng h·ªì
        let answeredQuestions = new Array(questions.length).fill(null);
        let correctnessStatus = new Array(questions.length).fill(null);
        // L·∫•y c√°c ph·∫ßn t·ª≠ DOM c·∫ßn thi·∫øt
        const startScreen = document.getElementById('start-screen');
        const startButton = document.getElementById('start-button');
        const quizContent = document.getElementById('quiz-content');
        const questionCounter = document.getElementById('question-counter');
        const multiselectInfo = document.getElementById('multiselect-info');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const dragdropContainer = document.getElementById('dragdrop-container');
        const draggableItemsSource = document.getElementById('draggable-items-source');
        const dropTargetsContainer = document.getElementById('drop-targets-container');
        const fillInTheBlankContainer = document.getElementById('fill-in-the-blank-container');
        const fillInTheBlankInput = document.getElementById('fill-in-the-blank-input');
        const checkFillInTheBlankButton = document.getElementById('check-fill-in-the-blank-button');
        const checkAnswerButton = document.getElementById('check-answer-button'); // N√∫t ki·ªÉm tra chung (Multi-select, Drag & Drop)
        const nextButton = document.getElementById('next-button');
        const resultsScreen = document.getElementById('results-screen');
        const restartButton = document.getElementById('restart-button');
        // S·ª¨A L·ªñI V√Ä T√çNH ƒêI·ªÇM: Th√™m c√°c d√≤ng n√†y ƒë·ªÉ khai b√°o bi·∫øn DOM
        const resultMessage = document.getElementById('result-message'); 
        const exitButton = document.getElementById('exit-button'); 
        const finalScore = document.getElementById('final-score'); // Th·∫ª hi·ªÉn th·ªã ƒëi·ªÉm s·ªë
        
        const sidebar = document.getElementById('sidebar');
        const timerDisplay = document.getElementById('timer');
        const questionListContainer = document.getElementById('question-list-container');
        function normalizeString(str) {
            let normalized = str.toLowerCase().trim();
            normalized = normalized.normalize('NFD').replace(/[\u0300-\u036f]/g, "");
            return normalized.replace(/\s+/g, '');
        }
        fillInTheBlankInput.onkeypress = (event) => {
            if (event.key === 'Enter') checkFillInTheBlank();
        };
        function drag(event) {
            event.dataTransfer.setData("text/plain", event.target.id);
            event.target.classList.add('opacity-50');
        }
        function dragEnd(event) {
            event.target.classList.remove('opacity-50');
        }
        function allowDrop(event) {
            event.preventDefault(); // Cho ph√©p th·∫£
            const target = event.target.closest('.drop-zone') || event.target.closest('.source-drop-zone');
            if (target) {
                target.classList.add('drag-over');
            }
        }
        function dragLeave(event) {
             const target = event.target.closest('.drop-zone') || event.target.closest('.source-drop-zone');
            if (target) {
                target.classList.remove('drag-over');
            }
        }
        function drop(event, categoryName) {
            event.preventDefault();
            let targetZone = event.target.closest('.drop-zone') || event.target.closest('.source-drop-zone');
            // N·∫øu ƒë√£ ki·ªÉm tra (c√≥ feedback), kh√¥ng cho ph√©p t∆∞∆°ng t√°c
            if (!targetZone || correctnessStatus[currentQuestionIndex] !== null) return; 
            targetZone.classList.remove('drag-over');
            const itemId = event.dataTransfer.getData("text/plain");
            const draggedElement = document.getElementById(itemId);
            if (draggedElement) {
                const oldParent = draggedElement.parentElement;
                if (oldParent) {
                    oldParent.removeChild(draggedElement);
                }
                targetZone.appendChild(draggedElement);
                let currentAnswer = answeredQuestions[currentQuestionIndex] || {};
                const itemText = draggedElement.textContent.trim(); 

                const isDroppedBackToSource = targetZone.id === 'draggable-items-source';

                if (isDroppedBackToSource) {
                    delete currentAnswer[itemText]; 
                } else { 
                    currentAnswer[itemText] = categoryName;
                }
                answeredQuestions[currentQuestionIndex] = Object.keys(currentAnswer).length > 0 ? currentAnswer : null;
                updateButtonStates();
            }
        }
        function checkCorrectness(questionIndex, selectedAnswers) {
            const currentQuestion = questions[questionIndex];
            if (currentQuestion.type === "drag_drop") {
                const droppedAnswers = selectedAnswers || answeredQuestions[questionIndex];
                if (!droppedAnswers) return false;
                if (Object.keys(droppedAnswers).length !== currentQuestion.items.length) {
                    return false;
                }
                return currentQuestion.items.every(item => {
                    const droppedCategory = droppedAnswers[item.text];
                    return droppedCategory === item.correctCategory;
                });
            } else if (currentQuestion.type === "fill_in_the_blank") {
                 const userAnswer = selectedAnswers || answeredQuestions[questionIndex];
                 if (!userAnswer) return false;
                 const normalizedUserAnswer = normalizeString(userAnswer);
                 const normalizedCorrectAnswer = normalizeString(currentQuestion.answer);

                 return normalizedUserAnswer === normalizedCorrectAnswer;
            } else {
                const correctAnswers = Array.isArray(currentQuestion.answer) ? currentQuestion.answer : [currentQuestion.answer];
                if (!Array.isArray(selectedAnswers)) {
                    selectedAnswers = selectedAnswers !== null ? [selectedAnswers] : [];
                }
                if (selectedAnswers.length !== correctAnswers.length) {
                    return false;
                }
                selectedAnswers.sort();
                correctAnswers.sort();
                return JSON.stringify(selectedAnswers) === JSON.stringify(correctAnswers);
            }
        }
        function showQuestion() {
            const currentQuestion = questions[currentQuestionIndex];
            questionCounter.textContent = `C√¢u h·ªèi: ${currentQuestionIndex + 1} / ${questions.length}`;
            questionText.innerHTML = currentQuestion.question;
            // ======= HI·ªÇN TH·ªä H√åNH ·∫¢NH MINH H·ªåA N·∫æU C√ì =======
            const imageContainer = document.getElementById("question-image-container");
            const imageElement = document.getElementById("question-image");
            if (currentQuestion.image) {
                imageElement.src = currentQuestion.image;
                imageContainer.classList.remove("hidden");
            } else {
                imageContainer.classList.add("hidden");
            }
            optionsContainer.classList.add('hidden');
            multiselectInfo.classList.add('hidden');
            dragdropContainer.classList.add('hidden');
            fillInTheBlankContainer.classList.add('hidden'); 
            checkAnswerButton.classList.add('hidden'); 
            if (currentQuestion.type === "drag_drop") {
                renderDragDropUI(currentQuestion);
                dragdropContainer.classList.remove('hidden');
            } else if (currentQuestion.type === "fill_in_the_blank") {
                renderFillInTheBlankUI(currentQuestion);
                fillInTheBlankContainer.classList.remove('hidden');
            } else {
                renderSelectUI(currentQuestion);
                optionsContainer.classList.remove('hidden');
            }
            nextButton.textContent = currentQuestionIndex >= questions.length - 1 ? "Ho√†n th√†nh b√†i thi" : "C√¢u ti·∫øp theo";
            updateButtonStates();
            updateSidebarHighlight();
        }
        function renderSelectUI(currentQuestion) {
            const isMulti = currentQuestion.type === "multi_select";
            multiselectInfo.classList.toggle('hidden', !isMulti);
            checkAnswerButton.classList.toggle('hidden', !isMulti); // Hi·ªÉn th·ªã n√∫t ki·ªÉm tra ch·ªâ cho Multi-Select
            optionsContainer.innerHTML = '';
            const savedAnswer = answeredQuestions[currentQuestionIndex];
            const savedAnswersArray = Array.isArray(savedAnswer) ? savedAnswer : (savedAnswer !== null ? [savedAnswer] : []);
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.innerHTML = option;
                let classes = [
                    "answer-button", "w-full", "py-3", "px-4", "rounded-xl", "text-center", 
                    "bg-gray-100", "border-2", "border-gray-300", 
                    "transition-all", "duration-200",
                    "font-medium", "text-gray-800", "shadow-sm"
                ];
                button.classList.add(...classes);
                if (isChecked) {
                    button.disabled = true;
                    button.classList.add("cursor-not-allowed");
                    const correctAnswers = Array.isArray(currentQuestion.answer) ? currentQuestion.answer : [currentQuestion.answer];
                    const isCorrectOption = correctAnswers.includes(option);
                    const isUserSelected = savedAnswersArray.includes(option);
                    if (isCorrectOption) {
                        button.classList.add("bg-green-500", "text-white", "border-green-600");
                        button.classList.remove("bg-gray-100", "border-gray-300");
                    }
                    if (isUserSelected && !isCorrectOption) {
                        button.classList.add("bg-red-500", "text-white", "border-red-600");
                        button.classList.remove("bg-green-500", "border-green-600", "bg-gray-100", "border-gray-300");
                    }
                } else {
                    button.classList.add("hover:bg-blue-100", "hover:border-blue-500");
                    if (isMulti) {
                        button.addEventListener('click', (e) => {
                            toggleSelection(e.currentTarget);
                            updateButtonStates(); 
                        });
                    } else {
                        button.addEventListener('click', (e) => singleSelectCheck(option, e.currentTarget));
                    }
                    if (savedAnswersArray.includes(option)) {
                        button.classList.add('selected-option');
                    }
                }
                optionsContainer.appendChild(button);
            });
        }
        function renderFillInTheBlankUI(currentQuestion) {
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            const savedAnswer = answeredQuestions[currentQuestionIndex] || "";
            fillInTheBlankInput.value = savedAnswer;
            fillInTheBlankInput.disabled = isChecked;
            fillInTheBlankInput.classList.remove('correct', 'incorrect');
            checkFillInTheBlankButton.classList.toggle('hidden', isChecked);
            if (isChecked) {
                const isCorrect = correctnessStatus[currentQuestionIndex];
                fillInTheBlankInput.classList.add(isCorrect ? 'correct' : 'incorrect');
                if (!isCorrect) {
                     fillInTheBlankInput.placeholder = `ƒê√°p √°n ƒë√∫ng: ${currentQuestion.answer}`;
                }
            } else {
                fillInTheBlankInput.placeholder = "Nh·∫≠p ƒë√°p √°n c·ªßa b·∫°n...";
            }
            updateButtonStates(); 
        }
        function checkFillInTheBlank() {
            const userAnswer = fillInTheBlankInput.value.trim();
            if (userAnswer === "") {
                showMessage("Vui l√≤ng nh·∫≠p ƒë√°p √°n v√†o √¥ tr·ªëng.", "yellow");
                return;
            }// 1. L∆∞u ƒë√°p √°n
            answeredQuestions[currentQuestionIndex] = userAnswer;
            checkAndApplyFeedback(currentQuestionIndex); 
            fillInTheBlankInput.disabled = true;
            checkFillInTheBlankButton.classList.add('hidden');
            updateButtonStates(); 
        }// --- Render Logic cho Drag & Drop ---
        function renderDragDropUI(currentQuestion) {
            draggableItemsSource.innerHTML = '';
            dropTargetsContainer.innerHTML = '';
            const savedDrops = answeredQuestions[currentQuestionIndex] || {};
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            const itemsDataMap = new Map(currentQuestion.items.map(item => [item.text, item]));
            checkAnswerButton.classList.remove('hidden');
            const sourcePlaceholder = document.createElement('p');
            sourcePlaceholder.classList.add('text-gray-500', 'text-sm', 'italic', 'w-full', 'source-placeholder');
            draggableItemsSource.ondragover = allowDrop;
            draggableItemsSource.ondragleave = dragLeave;
            if (!isChecked) {
                draggableItemsSource.ondrop = (e) => drop(e, null); 
                sourcePlaceholder.textContent = 'K√©o c√°c th·∫ª ·ªü ƒë√¢y... (K√©o th·∫ª t·ª´ √¥ ƒë√°p √°n v·ªÅ ƒë√¢y ƒë·ªÉ "k√©o ra")'; 
                sourcePlaceholder.classList.toggle('hidden', currentQuestion.items.length !== Object.keys(savedDrops).length);
            } else {
                draggableItemsSource.ondrop = null; // V√¥ hi·ªáu h√≥a k√©o/th·∫£
                sourcePlaceholder.textContent = 'ƒê√£ ho√†n th√†nh.';
                sourcePlaceholder.classList.add('hidden'); 
            }
            draggableItemsSource.appendChild(sourcePlaceholder);
            const dropZones = {};
            currentQuestion.categories.forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.classList.add('bg-gray-50', 'p-4', 'rounded-xl', 'shadow-md', 'flex', 'flex-col');
                const title = document.createElement('h3');
                title.textContent = category;
                title.classList.add('text-lg', 'font-bold', 'text-blue-700', 'mb-3', 'border-b', 'pb-2');
                categoryDiv.appendChild(title);
                const dropZone = document.createElement('div');
                dropZone.classList.add('drop-zone', 'flex', 'flex-wrap', 'gap-2', 'p-3', 'rounded-lg', 'flex-grow');
                dropZone.setAttribute('data-category', category);
                if (!isChecked) {
                    dropZone.ondragover = allowDrop;
                    dropZone.ondragleave = dragLeave;
                    dropZone.ondrop = (e) => drop(e, category); 
                } else {
                    dropZone.ondrop = null; 
                    dropZone.style.cursor = 'default';
                    const correctItemsForCategory = currentQuestion.items.filter(item => item.correctCategory === category);
                    const droppedItems = Object.entries(savedDrops)
                        .filter(([itemText, cat]) => cat === category)
                        .map(([itemText]) => itemText);
                    const correctlyPlacedCount = droppedItems.filter(text => itemsDataMap.get(text).correctCategory === category).length;
                    const incorrectlyPlacedCount = droppedItems.length - correctlyPlacedCount;
                    const missingCorrectCount = correctItemsForCategory.length - correctlyPlacedCount;
                    if (incorrectlyPlacedCount > 0 || missingCorrectCount > 0) {
                        dropZone.classList.add('incorrect-drop-zone');
                    } else if (correctlyPlacedCount > 0 && incorrectlyPlacedCount === 0 && missingCorrectCount === 0) {
                        dropZone.classList.add('correct-drop-zone');
                    }
                }
                dropTargetsContainer.appendChild(categoryDiv).appendChild(dropZone);
                dropZones[category] = dropZone;
            });
            currentQuestion.items.forEach(item => {
                const itemEl = createDraggableItem(item, isChecked);
                const droppedCategory = savedDrops[item.text];
                if (droppedCategory) {
                    const targetZone = dropZones[droppedCategory];
                    if (targetZone) {
                        targetZone.appendChild(itemEl);
                    }
                    if (isChecked) {
                        const isCorrect = droppedCategory === item.correctCategory;
                        itemEl.classList.remove('bg-white', 'border-gray-300');
                        itemEl.classList.add('text-gray-900', 'shadow-md', 'ring-2');
                        if (isCorrect) {
                            itemEl.classList.add('bg-green-200', 'ring-green-500');
                        } else {
                            itemEl.classList.add('bg-red-200', 'ring-red-500');
                            const correctHint = document.createElement('span');
                            correctHint.textContent = `(ƒê√∫ng: ${item.correctCategory})`;
                            correctHint.classList.add('text-xs', 'text-red-700', 'mt-1', 'block', 'font-normal');
                            itemEl.appendChild(correctHint);
                        }
                    }
                } else {// Item ch∆∞a ƒë∆∞·ª£c th·∫£ -> ƒê·∫∑t v√†o v√πng Source
                    draggableItemsSource.appendChild(itemEl);
                }
            });// ·∫®n placeholder Source n·∫øu kh√¥ng c√≤n item n√†o
            const placeholder = draggableItemsSource.querySelector('.source-placeholder');
            if (placeholder) placeholder.classList.toggle('hidden', currentQuestion.items.length === Object.keys(savedDrops).length);
        }// H√†m t·∫°o element cho th·∫ª k√©o
        function createDraggableItem(item, isChecked) {
            const itemEl = document.createElement('div');
            itemEl.id = item.id;
            itemEl.textContent = item.text;
            itemEl.classList.add(
                'draggable-item', 'p-3', 'rounded-lg', 'shadow-sm', 'font-medium', 'text-sm', 'text-gray-800'
            );
            if (!isChecked) {
                itemEl.setAttribute('draggable', 'true');
                itemEl.ondragstart = drag;
                itemEl.ondragend = dragEnd;
            } else {
                itemEl.setAttribute('draggable', 'false');
                itemEl.style.cursor = 'default';
            }
            return itemEl;
        }// --- Logic X·ª≠ l√Ω ƒê√°p √°n (Select) ---
        function toggleSelection(button) {
            button.classList.toggle('selected-option');
        }
        function singleSelectCheck(selectedOption, button) {
            answeredQuestions[currentQuestionIndex] = selectedOption;
            checkAndApplyFeedback(currentQuestionIndex);
            renderSelectUI(questions[currentQuestionIndex]);
            updateButtonStates();
        }// X·ª≠ l√Ω n√∫t CHECK ANSWER (cho Multi-Select v√† Drag & Drop)
        checkAnswerButton.addEventListener('click', () => {
            const currentQuestion = questions[currentQuestionIndex];
            if (currentQuestion.type === "multi_select") {
                const allOptionButtons = optionsContainer.querySelectorAll('button');
                const selectedOptions = Array.from(allOptionButtons)
                    .filter(btn => btn.classList.contains('selected-option'))
                    .map(btn => btn.textContent);
                if (selectedOptions.length === 0) {
                    showMessage("Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt ƒë√°p √°n tr∆∞·ªõc khi ki·ªÉm tra.", "yellow");
                    return;
                }// L∆∞u ƒë√°p √°n v√† ki·ªÉm tra
                answeredQuestions[currentQuestionIndex] = selectedOptions;
                checkAndApplyFeedback(currentQuestionIndex);
                renderSelectUI(questions[currentQuestionIndex]);
            } else if (currentQuestion.type === "drag_drop") {
                const droppedAnswers = answeredQuestions[currentQuestionIndex];
                const isAllDropped = droppedAnswers !== null && droppedAnswers && Object.keys(droppedAnswers).length === currentQuestion.items.length;
                if (!isAllDropped) {
                    showMessage("Vui l√≤ng k√©o th·∫£ t·∫•t c·∫£ c√°c th·∫ª v√†o v·ªã tr√≠ tr∆∞·ªõc khi ki·ªÉm tra.", "yellow");
                    return;
                }
                checkAndApplyFeedback(currentQuestionIndex);
                renderDragDropUI(questions[currentQuestionIndex]); // Render l·∫°i ƒë·ªÉ hi·ªÉn th·ªã feedback
            }
            updateButtonStates();
        });
        // H√†m ki·ªÉm tra v√† √°p d·ª•ng ph·∫£n h·ªìi
        function checkAndApplyFeedback(questionIndex) {
            const savedAnswer = answeredQuestions[questionIndex];
            const isCorrect = checkCorrectness(questionIndex, savedAnswer);
            const currentQuestionType = questions[questionIndex].type;
            if (isCorrect) {
                showMessage("üéâ Ch√∫c m·ª´ng, ƒë√°p √°n ch√≠nh x√°c!", "green");
            } else {
                if (currentQuestionType === "fill_in_the_blank") {
                     showMessage(`Sai r·ªìi. ƒê√°p √°n ƒë√∫ng l√†: ${questions[questionIndex].answer}.`, "red");
                } else if (currentQuestionType === "drag_drop") {
                     showMessage(`Sai r·ªìi. ƒê√°p √°n k√©o th·∫£ ch∆∞a ho√†n to√†n ch√≠nh x√°c. Vui l√≤ng xem ph·∫£n h·ªìi m√†u s·∫Øc!`, "red");
                } else {
                     showMessage("Sai r·ªìi. Vui l√≤ng xem l·∫°i k·∫øt qu·∫£ (M√†u xanh l√° l√† ƒë√∫ng, ƒë·ªè l√† sai)!", "red");
                }
            }
            correctnessStatus[questionIndex] = isCorrect;
            // X·ª≠ l√Ω feedback cho Fill-in-the-Blank (c·∫ßn g·ªçi l·∫°i renderFillInTheBlankUI ƒë·ªÉ update placeholder)
            if (currentQuestionType === "fill_in_the_blank") {
                renderFillInTheBlankUI(questions[questionIndex]);
            }
            updateSidebarHighlight(); // C·∫≠p nh·∫≠t m√†u s·∫Øc tr√™n sidebar
            return isCorrect;
        }
        function updateButtonStates() {
            const currentQuestion = questions[currentQuestionIndex];
            const isChecked = correctnessStatus[currentQuestionIndex] !== null;
            nextButton.disabled = !isChecked;
            nextButton.classList.toggle('bg-gray-200', !isChecked);
            nextButton.classList.toggle('text-gray-800', !isChecked);
            nextButton.classList.toggle('enabled-next', isChecked);
            if (currentQuestion.type === "multi_select" || currentQuestion.type === "drag_drop") {
                checkAnswerButton.classList.toggle('hidden', isChecked);
                if (!isChecked) {
                    let isAnswered = false;
                    if (currentQuestion.type === "drag_drop") {
                        const droppedAnswers = answeredQuestions[currentQuestionIndex];
                        isAnswered = droppedAnswers !== null && droppedAnswers && Object.keys(droppedAnswers).length === currentQuestion.items.length;
                    } else if (currentQuestion.type === "multi_select") {
                        const currentSelections = optionsContainer.querySelectorAll('.selected-option').length;
                        isAnswered = currentSelections > 0;
                    }
                    checkAnswerButton.disabled = !isAnswered;
                    checkAnswerButton.classList.toggle('check-button-enabled', isAnswered);
                    checkAnswerButton.classList.toggle('check-button-disabled', !isAnswered);
                }
            }// 3. Logic cho n√∫t CHECK FILL-IN-THE-BLANK
            if (currentQuestion.type === "fill_in_the_blank") {
                if (!isChecked) {
                    const isAnswered = fillInTheBlankInput.value.trim() !== "";
                    checkFillInTheBlankButton.disabled = !isAnswered;
                    checkFillInTheBlankButton.classList.toggle('check-button-enabled', isAnswered);
                    checkFillInTheBlankButton.classList.toggle('check-button-disabled', !isAnswered);
                    fillInTheBlankInput.oninput = updateButtonStates; 
                }
            }
        }
        nextButton.addEventListener('click', nextQuestion);
        function nextQuestion() {
            if (correctnessStatus[currentQuestionIndex] === null) {
                const currentType = questions[currentQuestionIndex].type;
                if (currentType === "multi_select" || currentType === "drag_drop" || currentType === "fill_in_the-blank") {
                    showMessage("Vui l√≤ng nh·∫•n n√∫t 'Ki·ªÉm tra ƒë√°p √°n' tr∆∞·ªõc khi chuy·ªÉn c√¢u.", "yellow");
                    return;
                }
            }// Chuy·ªÉn sang c√¢u ti·∫øp theo (ho·∫∑c ho√†n th√†nh b√†i thi)
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }
        function jumpToQuestion(index) {
            currentQuestionIndex = index;
            showQuestion();
        }
        function goToStartScreen() {
            clearInterval(timerInterval);
            elapsedTime = 0; 
            timerDisplay.textContent = "00:00"; // ƒê·∫∑t l·∫°i ƒë·ªìng h·ªì hi·ªÉn th·ªã
            quizContent.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            sidebar.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }
        function showResults() {
            clearInterval(timerInterval);
            quizContent.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            const totalCorrect = correctnessStatus.filter(status => status === true).length;
            const totalQuestions = questions.length;
            // T·ªêI ∆ØU H√ìA T√çNH ƒêI·ªÇM: C·∫≠p nh·∫≠t th·∫ª hi·ªÉn th·ªã ƒëi·ªÉm s·ªë
            finalScore.textContent = `${totalCorrect} / ${totalQuestions}`;
            if (totalCorrect === totalQuestions) {
                resultMessage.textContent = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${totalCorrect} / ${totalQuestions} c√¢u. Xin ch√∫c m·ª´ng! B·∫°n ƒë·∫°t k·∫øt qu·∫£ tuy·ªát ƒë·ªëi.`;
            } else {
                resultMessage.textContent = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${totalCorrect} / ${totalQuestions} c√¢u. H√£y xem l·∫°i c√°c c√¢u tr·∫£ l·ªùi c·ªßa m√¨nh tr√™n giao di·ªán nh√©.`;
            }
            sidebar.classList.add('hidden');
        }
        function restartQuiz() {
            currentQuestionIndex = 0;
            answeredQuestions = new Array(questions.length).fill(null);
            correctnessStatus = new Array(questions.length).fill(null);
            resultsScreen.classList.add('hidden');
            quizContent.classList.remove('hidden');
            sidebar.classList.remove('hidden'); 
            startTimer();
            createQuestionList(); 
            showQuestion();
        }
        function startTimer() {
            clearInterval(timerInterval); 
            timerInterval = setInterval(() => {
                elapsedTime++;
                const minutes = Math.floor(elapsedTime / 60);
                const seconds = elapsedTime % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        function createQuestionList() {
            questionListContainer.innerHTML = '';
            questions.forEach((q, index) => {
                const button = document.createElement('button');
                button.textContent = index + 1;
                button.classList.add(
                    "w-8", "h-8", "rounded-full", "font-medium", "text-sm",
                    "bg-gray-200", "text-gray-800", "hover:bg-blue-200",
                    "transition-colors", "duration-200"
                );
                button.setAttribute('data-index', index);
                button.addEventListener('click', () => {
                    jumpToQuestion(index);
                });
                questionListContainer.appendChild(button);
            });
        }
        function updateSidebarHighlight() {
            const allQuestionButtons = questionListContainer.querySelectorAll('button');
            allQuestionButtons.forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'bg-green-500', 'bg-red-500', 'bg-yellow-400');
                const index = parseInt(btn.getAttribute('data-index'));
                if (index === currentQuestionIndex) {
                    btn.classList.add('bg-blue-600', 'text-white');
                } else if (correctnessStatus[index] === true) {
                    btn.classList.add('bg-green-500', 'text-white');
                } else if (correctnessStatus[index] === false) {
                    btn.classList.add('bg-red-500', 'text-white');
                } else if (answeredQuestions[index] !== null) {
                    btn.classList.add('bg-yellow-400', 'text-white');
                }
            });
        }
        function showMessage(text, color) {
            const existingMessage = quizContent.querySelector('.temp-message');
            if (existingMessage) existingMessage.remove();
            const colorClasses = {
                "yellow": "bg-yellow-100 border-yellow-400 text-yellow-700",
                "red": "bg-red-100 border-red-400 text-red-700",
                "green": "bg-green-100 border-green-400 text-green-700"
            };
            const messageBox = document.createElement('div');
            messageBox.textContent = text;
            const colorClassString = colorClasses[color] || colorClasses['yellow'];
            messageBox.classList.add(
                ...colorClassString.split(' '), 
                "border", "px-4", "py-3", "rounded", "relative", "mb-4", "temp-message"
            );
            quizContent.insertBefore(messageBox, questionCounter.nextElementSibling);
            setTimeout(() => messageBox.remove(), 3000); 
        }// --- H√†m X√ÅO TR·ªòN M·∫¢NG (Fisher-Yates Shuffle) ---
        function shuffleArray(array) {
            let shuffled = array.slice(); // T·∫°o b·∫£n sao ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn d·ªØ li·ªáu g·ªëc
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }// --- Kh·ªüi t·∫°o s·ª± ki·ªán ---
        startButton.addEventListener('click', () => {
            // ƒê·∫£m b·∫£o reset tr·∫°ng th√°i tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu
            currentQuestionIndex = 0;
            answeredQuestions = new Array(questions.length).fill(null);
            correctnessStatus = new Array(questions.length).fill(null);
            // questions = shuffleArray(questions); // X√°o tr·ªôn c√¢u h·ªèi
            startScreen.classList.add('hidden');
            quizContent.classList.remove('hidden');
            sidebar.classList.remove('hidden');
            createQuestionList();
            startTimer();
            showQuestion();
        });
        restartButton.addEventListener('click', restartQuiz);
        exitButton.addEventListener('click', () => {
            showMessage("ƒê√£ tho√°t kh·ªèi b√†i ki·ªÉm tra. D·ªØ li·ªáu l√†m b√†i hi·ªán t·∫°i s·∫Ω kh√¥ng ƒë∆∞·ª£c l∆∞u. ƒêang quay v·ªÅ m√†n h√¨nh b·∫Øt ƒë·∫ßu...", "red");
            setTimeout(goToStartScreen, 1000);
        });
    </script>
</body>
</html>